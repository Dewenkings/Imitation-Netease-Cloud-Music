# ğŸµ ç½‘æ˜“äº‘éŸ³ä¹ - éƒ¨ç½²æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run serve

# å¯åŠ¨åç«¯APIæœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run server:dev
```

### æœ¬åœ°éƒ¨ç½²æµ‹è¯•
```bash
# éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒï¼ˆæœ¬åœ°ï¼‰
npm run deploy:dev

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆæœ¬åœ°ï¼‰
npm run deploy:prod
```

### PM2 ç®¡ç†å‘½ä»¤
```bash
# å¯åŠ¨åº”ç”¨
npm run pm2:start

# æŸ¥çœ‹çŠ¶æ€
npm run pm2:status

# æŸ¥çœ‹æ—¥å¿—
npm run pm2:logs

# é‡å¯åº”ç”¨
npm run pm2:restart

# åœæ­¢åº”ç”¨
npm run pm2:stop
```

## è‡ªåŠ¨éƒ¨ç½²

### æµ‹è¯•ç¯å¢ƒ
æ¨é€åˆ° `develop` åˆ†æ”¯è‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒï¼š
```bash
git checkout develop
git add .
git commit -m "feat: æ–°åŠŸèƒ½"
git push origin develop
```

### ç”Ÿäº§ç¯å¢ƒ
æ¨é€åˆ° `main` åˆ†æ”¯è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼š
```bash
git checkout main
git merge develop
git push origin main
```

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ .github/workflow/          # GitHub Actions å·¥ä½œæµ
â”‚   â”œâ”€â”€ deploy.yaml           # é€šç”¨éƒ¨ç½²æ¨¡æ¿
â”‚   â”œâ”€â”€ deploy.dev.yaml       # æµ‹è¯•ç¯å¢ƒéƒ¨ç½²
â”‚   â””â”€â”€ deploy.prod.yaml      # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deploy.sh             # æœ¬åœ°éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ server/                   # åç«¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ dist/                 # å‰ç«¯æ‰“åŒ…æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ logs/                 # åº”ç”¨æ—¥å¿—ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ app.js                # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ package.json          # æœåŠ¡å™¨ä¾èµ–
â”œâ”€â”€ src/                      # å‰ç«¯æºç 
â”œâ”€â”€ pm2.config.js             # PM2 é…ç½®æ–‡ä»¶
â”œâ”€â”€ vue.config.js             # Vue æ„å»ºé…ç½®
â””â”€â”€ DEPLOYMENT.md             # è¯¦ç»†éƒ¨ç½²æ–‡æ¡£
```

## ç¯å¢ƒé…ç½®

### æµ‹è¯•ç¯å¢ƒ
- ç«¯å£ï¼š3001
- å®ä¾‹æ•°ï¼š1
- è‡ªåŠ¨é‡å¯ï¼šæ˜¯

### ç”Ÿäº§ç¯å¢ƒ
- ç«¯å£ï¼š3000
- å®ä¾‹æ•°ï¼š2ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰
- è‡ªåŠ¨é‡å¯ï¼šæ˜¯
- å†…å­˜é™åˆ¶ï¼š1GB

## éƒ¨ç½²åŸç†

1. **å‰ç«¯æ„å»º**ï¼š`npm run build` å°†Vueé¡¹ç›®æ‰“åŒ…åˆ° `server/dist`
2. **é™æ€æ–‡ä»¶æœåŠ¡**ï¼šExpressæœåŠ¡å™¨æä¾›é™æ€æ–‡ä»¶æœåŠ¡
3. **APIè·¯ç”±**ï¼š`/api/*` è·¯å¾„ç”±åç«¯å¤„ç†
4. **SPAæ”¯æŒ**ï¼šä½¿ç”¨ `connect-history-api-fallback` æ”¯æŒVue Router
5. **è¿›ç¨‹ç®¡ç†**ï¼šPM2ç®¡ç†Node.jsè¿›ç¨‹ï¼Œæ”¯æŒé›†ç¾¤æ¨¡å¼

## å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs --lines 100

# é‡å¯æ‰€æœ‰åº”ç”¨
pm2 restart all

# åœæ­¢æ‰€æœ‰åº”ç”¨
pm2 stop all

# æŸ¥çœ‹è¿›ç¨‹ç›‘æ§
pm2 monit
```

## æ•…éšœæ’é™¤

### åº”ç”¨æ— æ³•å¯åŠ¨
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`lsof -i :3000`
2. æŸ¥çœ‹PM2æ—¥å¿—ï¼š`pm2 logs`
3. æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼š`node --version`

### å‰ç«¯é¡µé¢æ— æ³•è®¿é—®
1. ç¡®è®¤å‰ç«¯å·²æ„å»ºï¼šæ£€æŸ¥ `server/dist` ç›®å½•
2. æ£€æŸ¥é™æ€æ–‡ä»¶æœåŠ¡é…ç½®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### APIè¯·æ±‚å¤±è´¥
1. æ£€æŸ¥APIè·¯ç”±é…ç½®
2. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
3. ç¡®è®¤ç½‘æ˜“äº‘éŸ³ä¹APIæœåŠ¡çŠ¶æ€

## æ›´å¤šä¿¡æ¯

è¯¦ç»†çš„éƒ¨ç½²è¯´æ˜è¯·æŸ¥çœ‹ [DEPLOYMENT.md](./DEPLOYMENT.md)