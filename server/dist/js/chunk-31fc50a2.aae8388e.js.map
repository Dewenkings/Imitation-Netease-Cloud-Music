{"version":3,"sources":["webpack:///./src/views/album/Album.vue?f02a","webpack:///src/views/album/Album.vue","webpack:///./src/views/album/Album.vue?f026","webpack:///./src/views/album/Album.vue","webpack:///./src/views/album/Album.vue?caf5"],"names":["render","_vm","this","_h","$createElement","_c","_self","albumInfo","staticClass","attrs","album","picUrl","_v","_s","name","on","playAll","subAlbum","class","isSub","_m","$event","$router","push","params","id","artist","_f","publishTime","staticStyle","songs","clickRow","clickCell","handleIndex","directives","rawName","value","expression","comments","hotComments","getAlbumComment","slot","_e","total","currentCommentPage","commentPageChange","description","staticRenderFns","components","Comment","GoTop","data","isCommentLoading","methods","getAlbumDetail","res","type","timestamp","Date","document","listInfo","behavior","top","offset","limit","index","musicList","musicListId","row","page","t","getAlbumSublist","column","cell","url","serve","downloadMusicInfo","getIsSub","created","mounted","filters","showDate","handleNum","component"],"mappings":"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","file":"js/chunk-31fc50a2.aae8388e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.albumInfo.album)?_c('div',{staticClass:\"album\"},[_c('div',{staticClass:\"listInfo\"},[_c('div',{staticClass:\"listAvatar\"},[_c('img',{attrs:{\"src\":_vm.albumInfo.album.picUrl + '?param=300y300',\"alt\":\"\"}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"titleTag\"},[_vm._v(\"专辑\")]),_c('div',{staticClass:\"titleContent\"},[_vm._v(_vm._s(_vm.albumInfo.album.name))])]),_c('div',{staticClass:\"buttons\"},[_c('div',{staticClass:\"buttonItem playAll\",on:{\"click\":_vm.playAll}},[_c('i',{staticClass:\"iconfont icon-bofang playAll\"}),_c('span',[_vm._v(\"播放全部\")])]),_c('div',{staticClass:\"buttonItem\",on:{\"click\":_vm.subAlbum}},[_c('i',{staticClass:\"iconfont icon-xihuan\",class:_vm.isSub ? 'red' : ''}),_c('span',[_vm._v(_vm._s(_vm.isSub ? \"已收藏\" : \"收藏\"))])]),_vm._m(0)]),_c('div',{staticClass:\"otherInfo\"},[_c('div',{staticClass:\"playCount\"},[_vm._v(\" 歌手： \"),_c('span',{on:{\"click\":function($event){return _vm.$router.push({\n              name: 'singerDetail',\n              params: { id: _vm.albumInfo.album.artist.id },\n              })}}},[_vm._v(_vm._s(_vm.albumInfo.album.artist.name))])])]),_c('div',{staticClass:\"otherInfo detail\"},[_c('span',[_vm._v(\"时间：\"+_vm._s(_vm._f(\"showDate\")(_vm.albumInfo.album.publishTime)))])])])]),_c('div',{staticClass:\"musicList\"},[_c('el-tabs',{attrs:{\"value\":\"first\"}},[_c('el-tab-pane',{attrs:{\"label\":\"歌曲列表\",\"name\":\"first\"}},[_c('el-table',{staticStyle:{\"width\":\"90%\"},attrs:{\"data\":_vm.albumInfo.songs,\"stripe\":\"\",\"size\":\"mini\",\"highlight-current-row\":\"\"},on:{\"row-dblclick\":_vm.clickRow,\"cell-click\":_vm.clickCell}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"30\",\"label\":\"\",\"index\":_vm.handleIndex}}),_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"30\"}},[_c('i',{staticClass:\"iconfont icon-download\"})]),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"音乐标题\",\"width\":\"350\"}}),_c('el-table-column',{attrs:{\"prop\":\"ar[0].name\",\"label\":\"歌手\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"al.name\",\"label\":\"专辑\",\"width\":\"240\"}}),_c('el-table-column',{attrs:{\"prop\":\"dt\",\"label\":\"时长\",\"width\":\"100\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"评论\",\"name\":\"second\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isCommentLoading),expression:\"isCommentLoading\"}],staticClass:\"commentList\"},[(_vm.comments.hotComments)?_c('comment',{attrs:{\"comments\":_vm.comments.hotComments,\"commentType\":'album',\"commentId\":_vm.albumInfo.album.id + ''},on:{\"getComment\":_vm.getAlbumComment}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"精彩评论\")])]):_vm._e(),_c('comment',{attrs:{\"comments\":_vm.comments.comments,\"commentType\":'album',\"commentId\":_vm.albumInfo.album.id + '',\"isHotComment\":_vm.comments.hotComments ? false : true},on:{\"getComment\":_vm.getAlbumComment}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"热门评论\")])])],1),(_vm.comments && _vm.comments.comments)?_c('div',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.comments.total,\"small\":\"\",\"page-size\":50,\"current-page\":_vm.currentCommentPage},on:{\"current-change\":_vm.commentPageChange}})],1):_vm._e()]),_c('el-tab-pane',{attrs:{\"label\":\"专辑详情\",\"name\":\"third\"}},[_c('div',{staticClass:\"albumDesc\"},[_vm._v(_vm._s(_vm.albumInfo.album.description))])])],1)],1),_c('go-top',{attrs:{\"scrollObj\":\".album\"}})],1):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buttonItem\"},[_c('i',{staticClass:\"iconfont icon-zhuanfa\"}),_c('span',[_vm._v(\"分享\")])])}]\n\nexport { render, staticRenderFns }","  <template>\n  <div class=\"album\"  v-if=\"albumInfo.album\">\n    <!-- 专辑信息 -->\n    <div class=\"listInfo\">\n      <!-- 专辑封面 -->\n      <div class=\"listAvatar\">\n        <img :src=\"albumInfo.album.picUrl + '?param=300y300'\" alt=\"\">\n      </div>\n      <div class=\"right\">\n        <!-- 标题 -->\n        <div class=\"title\">\n          <div class=\"titleTag\">专辑</div>\n          <div class=\"titleContent\">{{ albumInfo.album.name }}</div>\n        </div>\n        <!-- 操作按钮 -->\n        <div class=\"buttons\">\n          <div class=\"buttonItem playAll\" @click=\"playAll\">\n            <i class=\"iconfont icon-bofang playAll\"></i>\n            <span>播放全部</span>\n          </div>\n          <div class=\"buttonItem\" @click=\"subAlbum\">\n            <i class=\"iconfont icon-xihuan\" :class=\"isSub ? 'red' : ''\"></i>\n            <span>{{ isSub ? \"已收藏\" : \"收藏\" }}</span>\n          </div>\n          <div class=\"buttonItem\">\n            <i class=\"iconfont icon-zhuanfa\"></i>\n            <span>分享</span>\n          </div>\n        </div>\n        <div class=\"otherInfo\">\n          <div class=\"playCount\">\n            歌手：\n            <span\n            @click=\"$router.push({\n                name: 'singerDetail',\n                params: { id: albumInfo.album.artist.id },\n                })\"\n            >{{albumInfo.album.artist.name}}</span>\n          </div>\n        </div>\n        <div class=\"otherInfo detail\">\n          <span>时间：{{albumInfo.album.publishTime | showDate}}</span>\n        </div>\n      </div>\n    </div>\n    <!-- 专辑中的歌曲列表 -->\n    <div class=\"musicList\">\n      <el-tabs value=\"first\">\n        <el-tab-pane label=\"歌曲列表\" name=\"first\">\n          <el-table :data=\"albumInfo.songs\" style=\"width: 90%\"\n          stripe size=\"mini\" highlight-current-row\n          @row-dblclick=\"clickRow\"\n          @cell-click=\"clickCell\">\n            <el-table-column type=\"index\" width=\"30\" label=\"\" :index=\"handleIndex\"></el-table-column>\n            <el-table-column label=\"\" width=\"30\">\n              <!-- 下载按钮 -->\n              <i class=\"iconfont icon-download\"></i>\n            </el-table-column>\n            <el-table-column prop=\"name\" label=\"音乐标题\" width=\"350\"></el-table-column>\n            <el-table-column prop=\"ar[0].name\" label=\"歌手\"  width=\"200\"></el-table-column>\n            <el-table-column prop=\"al.name\" label=\"专辑\" width=\"240\"></el-table-column>\n            <el-table-column prop=\"dt\" label=\"时长\" width=\"100\"></el-table-column>\n          </el-table>\n        </el-tab-pane>\n        <el-tab-pane label=\"评论\" name=\"second\">\n          <div class=\"commentList\" v-loading=\"isCommentLoading\">\n            <!-- 精彩评论 -->\n            <comment\n              :comments=\"comments.hotComments\"\n              :commentType=\"'album'\"\n              :commentId=\"albumInfo.album.id + ''\"\n              @getComment=\"getAlbumComment\"\n              v-if=\"comments.hotComments\"\n              ><div slot=\"title\">精彩评论</div></comment\n            >\n            <!-- 最新评论 -->\n            <comment\n              :comments=\"comments.comments\"\n              :commentType=\"'album'\"\n              :commentId=\"albumInfo.album.id + ''\"\n              :isHotComment=\"comments.hotComments ? false : true\"\n              @getComment=\"getAlbumComment\"\n              ><div slot=\"title\">热门评论</div></comment\n            >\n          </div>\n          <!-- 分页 -->\n          <div class=\"page\" v-if=\"comments && comments.comments\">\n            <el-pagination\n              background\n              layout=\"prev, pager, next\"\n              :total=\"comments.total\"\n              small\n              :page-size=\"50\"\n              :current-page=\"currentCommentPage\"\n              @current-change=\"commentPageChange\"\n            >\n            </el-pagination>\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"专辑详情\" name=\"third\">\n          <div class=\"albumDesc\">{{albumInfo.album.description}}</div>\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n    <go-top scrollObj=\".album\"></go-top>\n  </div>\n</template>\n\n<script>\nimport { formatDate, handleNum, handleMusicTime } from 'plugins/util'\nimport Comment from 'components/comment/Comment.vue'\nimport GoTop from 'components/goTop/GoTop.vue'\nexport default {\n  components: { Comment, GoTop },\n  name: 'album',\n  data () {\n    return {\n      albumInfo: {},\n      isSub: false,\n      comments: {},\n      // 当前评论页数\n      currentCommentPage: 1,\n      // 评论是否在加载中\n      isCommentLoading: false\n    }\n  },\n  methods: {\n    // 请求专辑详情\n    async getAlbumDetail () {\n      let res = await this.$request('/album', {\n        id: this.$route.params.id\n      })\n      console.log('album:', res)\n      res = res.data\n      // 处理歌曲时间\n      res.songs.forEach((item, index) => {\n        res.songs[index].dt = handleMusicTime(item.dt)\n      })\n      this.albumInfo = res\n    },\n    // 获取歌单评论\n    async getAlbumComment (type) {\n      // 获取时间戳\n      var timestamp = Date.parse(new Date())\n      this.isCommentLoading = true\n\n      // 每次请求前先清空comment\n      // this.comments.comments = [];\n\n      if (type === 'changePage') {\n        const album = document.querySelector('.album')\n        const listInfo = document.querySelector('.listInfo')\n        console.log([listInfo])\n        album.scrollTo({\n          behavior: 'smooth',\n          top: listInfo.clientHeight - 25\n        })\n      }\n\n      const res = await this.$request('/comment/album', {\n        id: this.$route.params.id,\n        offset: (this.currentCommentPage - 1) * 50,\n        limit: 50,\n        timestamp\n      })\n      this.isCommentLoading = false\n      if (res.data.code !== 200) {\n        this.$message.error('获取评论失败,请稍后重试!')\n        return\n      }\n\n      // console.log(res);\n      this.comments = res.data\n    },\n    // 事件函数\n    handleIndex (index) {\n      index += 1\n      // console.log(index)\n      if (index < 10) {\n        return '0' + index\n      } else {\n        return index\n      }\n    },\n    // 点击全部播放按钮的回调-----\n    playAll () {\n      this.$store.commit('updateMusicId', this.albumInfo.songs[0].id)\n      this.$store.commit('updateMusicList', {\n        musicList: this.albumInfo.songs,\n        musicListId: this.albumInfo.album.id\n      })\n    },\n    // 双击播放音乐\n    clickRow (row) {\n      // 将musicId提交到vuex中 供bottomControl查询歌曲url和其它操作\n      this.$store.commit('updateMusicId', row.id)\n      // 如果歌单发生变化,则提交歌单到vuex\n      if (this.albumInfo.album.id !== this.$store.state.musicListId) {\n        // 将歌单传到vuex\n        this.$store.commit('updateMusicList', {\n          musicList: this.albumInfo.songs,\n          musicListId: this.albumInfo.album.id\n        })\n      }\n    },\n    // 评论点击翻页的回调\n    commentPageChange (page) {\n      this.currentCommentPage = page\n      this.getAlbumComment('changePage')\n    },\n    // 点击收藏专辑的回调\n    async subAlbum () {\n      this.isSub = !this.isSub\n      await this.$request('/album/sub', {\n        id: this.$route.params.id,\n        t: this.isSub ? 1 : 0\n      })\n      this.getAlbumSublist()\n    },\n    // 获取已收藏专辑列表并判断用户是否收藏当前专辑  因为喜欢和收藏具有较高实时性，所以每次请求都添加时间戳，避免缓存304\n    async getAlbumSublist () {\n      const timestamp = Date.parse(new Date())\n      const res = await this.$request('/album/sublist', {\n        limit: 1000,\n        timestamp\n      })\n      console.log(res)\n      this.$store.commit('updateSubAlbumList', res.data.data)\n    },\n    // 点击单元格的回调\n    async clickCell (row, column, cell) {\n      // 判断点击的是下载按钮\n      if (cell.querySelector('.icon-download')) {\n        // 请求该歌曲的url\n        console.log(row)\n        const res = await this.$request('/song/url', { id: row.id })\n        console.log(res)\n        if (res.data.data[0].url == null) {\n          this.$message.warning('暂时无法获取该资源哦!')\n          return\n        }\n\n        // 匹配资源的域名\n        const url = res.data.data[0].url.match(/http.*?\\.net/)\n        // 匹配域名名称，并匹配对应的代理\n        const serve = url[0].match(/http:\\/(\\S*).music/)[1]\n        if (\n          serve !== '/m7' &&\n          serve !== '/m701' &&\n          serve !== '/m8' &&\n          serve !== '/m801'\n        ) {\n          // 没有对应的代理\n          this.$message.error('匹配不到对应的代理,下载失败!')\n          return\n        }\n        // 截取后面的参数\n        const params = res.data.data[0].url.slice(url[0].length)\n        // console.log(url[0], serve, params);\n\n        const downloadMusicInfo = {\n          url: serve + params,\n          name:\n            row.name +\n            ' - ' +\n            row.ar[0].name +\n            '.' +\n            res.data.data[0].type.toLowerCase()\n        }\n        console.log(downloadMusicInfo)\n        this.$store.commit('updateDownloadMusicInfo', downloadMusicInfo)\n      }\n    },\n    // 判断用户是否收藏了该专辑\n    getIsSub () {\n      this.isSub = this.$store.state.subAlbumList.find(\n        (item) => item.id === this.$route.params.id\n      )\n    }\n  },\n  created () {\n    // 获取专辑评价\n    this.getAlbumComment()\n  },\n  async mounted () {\n    await this.getAlbumDetail()\n    this.$nextTick(() => {\n      // 判断是否和上一次打开的歌单相同\n      if (this.$route.params.id === this.$store.state.musicListId) {\n        this.handleDOM(this.$store.state.musicId)\n      }\n    })\n    if (this.$store.state.subAlbumList == null) {\n      await this.getAlbumSublist()\n    }\n    this.getIsSub()\n  },\n  filters: {\n    showDate (value) {\n      // 1、先将时间戳转成Date对象\n      const date = new Date(value)\n\n      // 2、将date进行格式化\n      return formatDate(date, 'yyyy-MM-dd')\n    },\n    handleNum\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .album {\n    height: calc(81vh);\n    overflow-y: scroll;\n  }\n  .listInfo {\n    display: flex;\n    justify-items: center;\n    padding: 25px 15px;\n  }\n  .right {\n    width: calc(100% - 200px);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n  .listAvatar {\n    width: 150px;\n    height: 150px;\n    margin-right: 15px\n  }\n  .listAvatar img {\n    width: 100%;\n    border-radius: 10px;\n  }\n  .title {\n    display: flex;\n    align-items: center;\n  }\n  .titleTag {\n    width:32px;\n    font-size: 12px;\n    color: #ec4141;\n    border: 1px solid #ec4141;\n    padding: 1px 2px;\n    border-radius: 2px;\n    margin-right: 5px;\n    transform: scale(0.8);\n  }\n  .titleContent {\n    font-size: 20px;\n    font-weight: 600;\n    color: #373737;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: 90%;\n  }\n  .buttons {\n    margin: 8px 0 0 -5px;\n    display: flex;\n  }\n  .buttonItem {\n    padding: 8px 15px;\n    border: 1px solid #ddd;\n    border-radius: 20px;\n    font-size: 12px;\n    transform: scale(0.9);\n  }\n  .buttonItem i {\n    font-size: 12px;\n    transform: scale(0.9);\n    margin-right: 3px;\n  }\n  .playAll {\n    background-color: #ec4141;\n    color: white;\n  }\n  .otherInfo {\n    margin: 10px 0 0 -30px;\n    display: flex;\n    font-size: 12px;\n    transform: scale(0.9);\n  }\n  .detail {\n    margin-top: 6px;\n  }\n  .playCount span {\n    cursor: pointer;\n    color: #6191c2;\n  }\n  .albumDesc {\n    font-size: 12px;\n    text-indent: 2em;\n    line-height: 25px;\n    color: #373737;\n    letter-spacing: 0.5px;\n  }\n  .musicList {\n    width: calc(100%);\n    margin-left: 15px;\n  }\n  .page {\n    display: flex;\n    justify-content: center;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Album.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Album.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Album.vue?vue&type=template&id=298a5f06&scoped=true&\"\nimport script from \"./Album.vue?vue&type=script&lang=js&\"\nexport * from \"./Album.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Album.vue?vue&type=style&index=0&id=298a5f06&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"298a5f06\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Album.vue?vue&type=style&index=0&id=298a5f06&lang=less&scoped=true&\""],"sourceRoot":""}