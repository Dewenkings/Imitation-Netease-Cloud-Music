(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fdb022a2"],{"0185":function(t,i,e){},"08a8":function(t,i,e){t.exports=e.p+"img/topSongsLogo.3c321631.png"},"34bd":function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"listTable"},[e("div",{staticClass:"listCover"},[e("img",{attrs:{src:t.officialListDetailItem.coverImgUrl||t.cover,alt:""},on:{click:function(i){return t.clickCheckAll(t.officialListDetailItem.id)}}})]),e("div",{staticClass:"listContainer"},[t._t("header"),e("table",t._l(t.officialListDetailItem.tracks&&t.officialListDetailItem.tracks.slice(0,5)||t.officialListDetailItem.topSongs&&(t.officialListDetailItem.isOpen?t.officialListDetailItem.topSongs:t.officialListDetailItem.topSongs.slice(0,10))||t.officialListDetailItem.songs.slice(0,10),(function(i,s){return e("tr",{key:s,staticClass:"listRows",on:{click:t.handleRowClick,dblclick:function(e){return t.handleRowDbClick(t.officialListDetailItem.id||i.id,s)}}},[e("td",{staticClass:"index"},[t._v(t._s(s+1))]),e("td",{staticClass:"musicName"},[t._v(t._s(i.name))]),e("td",{staticClass:"musicTime"},[t._v(t._s(i.dt))]),e("td",{staticClass:"singer"},[t._v(t._s(i.ar[0].name))])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCheckAllShow,expression:"isCheckAllShow"}],staticClass:"checkAll",on:{click:function(i){return t.clickCheckAll(t.officialListDetailItem.id)}}},[t._v(" 查看全部 "),e("i",{staticClass:"iconfont icon-arrow-right-bold"})])],2)])},a=[],n={name:"ListTable",props:{officialListDetailItem:{type:Object,default:function(){return{}}},cover:{type:String,default:function(){return""}},listId:{type:String,default:function(){return""}},isCheckAllShow:{type:Boolean,default:function(){return!0}}},data:function(){return{}},methods:{handleRowClick:function(t){var i;i="tr"===t.path[0].localName?t.path[0]:t.path[1],this.$emit("handleRowClick",i)},handleRowDbClick:function(t,i){var e=this.listId;this.$emit("handleRowDbClick",{id:t,index:i,listId:e})},clickCheckAll:function(t){var i=this.listId;this.$emit("clickCheckAll",{id:t,listId:i})}}},r=n,o=(e("6761"),e("2877")),c=Object(o["a"])(r,s,a,!1,null,"5544798f",null);i["a"]=c.exports},"5b37":function(t,i,e){"use strict";e("a16d")},6761:function(t,i,e){"use strict";e("93ea")},"68e2":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.singerInfo.cover?s("div",{staticClass:"SingerDetail"},[s("div",{staticClass:"listInfo"},[s("div",{staticClass:"listAvatar"},[s("img",{attrs:{src:t.singerInfo.cover+"?param=300y300",alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[s("div",{staticClass:"titleContent"},[t._v(t._s(t.singerInfo.name))])]),s("div",{staticClass:"buttons"},[s("div",{staticClass:"buttonItem",on:{click:t.subSinger}},[s("i",{staticClass:"iconfont icon-xihuan",class:t.isSub?"red":""}),s("span",[t._v(t._s(t.isSub?"已收藏":"收藏"))])]),t._m(0)]),s("div",{staticClass:"otherInfo"},[s("div",{staticClass:"musicNum"},[t._v("单曲数："+t._s(t.singerInfo.musicSize))]),s("div",{staticClass:"musicNum"},[t._v("专辑数："+t._s(t.singerInfo.albumSize))]),s("div",{staticClass:"musicNum"},[t._v("MV数："+t._s(t.singerInfo.mvSize))])])])]),s("div",{staticClass:"musicList"},[s("el-tabs",{attrs:{value:"first"},on:{"tab-click":t.clickTab}},[s("el-tab-pane",{attrs:{label:"专辑",name:"first"}},[t.topSongs.topSongs?s("div",{staticClass:"topSongs"},[s("list-table",{attrs:{officialListDetailItem:t.topSongs,isCheckAllShow:t.isCheckAllShow,cover:e("08a8"),listId:this.$route.params.id.toString()},on:{handleRowClick:t.handleRowClick,handleRowDbClick:t.handleRowDbClick,clickCheckAll:t.allTopSongs}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"title"},[t._v("热门50首")])])])],1):t._e(),0!=t.singerAlbum.length?s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"albumItemContainer",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.singerAlbum,(function(i,e){return s("div",{key:e,staticClass:"albumItem"},[s("list-table",{attrs:{officialListDetailItem:i.songsObj,cover:i.album.blurPicUrl+"?param=300y300",listId:i.album.id.toString()},on:{handleRowClick:t.handleRowClick,handleRowDbClick:t.handleRowDbClick,clickCheckAll:t.clickListCardItem}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"title"},[t._v(t._s(i.album.name))])])])],1)})),0):t._e()]),s("el-tab-pane",{attrs:{label:"MV",name:"second"}},[s("video-list-card",{attrs:{videoList:t.singerMvInfo.mvs,isLoad:!0},on:{clickListCardItem:t.goToVideoDetail,bottomLoad:t.bottomLoad}})],1),s("el-tab-pane",{attrs:{label:"歌手详情",name:"third"}},[s("div",{staticClass:"singerDesc"},[t._v(t._s(t.singerInfo.briefDesc))])]),s("el-tab-pane",{attrs:{label:"相似歌手",name:"fourth"}},[0==t.simiArtistList.length?s("div",{staticClass:"noSimiAritst"},[t._v(" 没有相关歌手 ")]):s("div",[s("list-card",{attrs:{listCardData:t.simiArtistList},on:{clickListCardItem:t.clickToSinger}})],1)])],1)],1),s("go-top",{attrs:{scrollObj:".SingerDetail"}})],1):t._e()},a=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"buttonItem"},[e("i",{staticClass:"iconfont icon-link"}),e("span",[t._v("个人主页")])])}];function n(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var r,o=e("c7eb"),c=e("1da1"),l=(e("d3b7"),e("159b"),e("25f0"),e("c740"),e("7db0"),e("aa2a")),d=e("34bd"),u=e("9916"),m=e("cf90"),f=e("7cff"),h={},v={components:{ListTable:d["a"],ListCard:u["a"],VideoListCard:m["a"],GoTop:f["a"]},data:function(){return{singerInfo:{},topSongs:{},singerAlbum:[],albumPage:1,disabled:!0,simiArtistList:[],isCheckAllShow:!0,isDbc:!1,isSub:!1,singerMvInfo:{mvs:[],hasMore:!1},videoPage:1}},methods:{getSingerInfo:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){var e;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$request("/artist/detail",{id:t.$route.params.id});case 2:e=i.sent,t.singerInfo=e.data.data.artist;case 4:case"end":return i.stop()}}),i)})))()},getSingerTopSongs:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){var e,s;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$request("/artist/top/song",{id:t.$route.params.id});case 2:e=i.sent,s=e.data.songs,s.forEach((function(t,i){s[i].dt=Object(l["b"])(t.dt)})),t.topSongs={topSongs:s,isOpen:!1};case 6:case"end":return i.stop()}}),i)})))()},getSingerMv:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){var e;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$request("/artist/mv",{id:t.$route.params.id,limit:20*t.videoPage});case 2:e=i.sent,t.singerMvInfo=e.data;case 4:case"end":return i.stop()}}),i)})))()},getAlbumInfo:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){var e;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$request("/artist/album",{id:t.$route.params.id,limit:20,offset:20*(t.albumPage-1)});case 2:return e=i.sent,t.isAlbumMore=e.data.more,e=e.data.hotAlbums,i.next=7,e.forEach((function(i){t.getAlbumDetail(i.id)}));case 7:case"end":return i.stop()}}),i)})))()},getAlbumDetail:function(t){var i=this;return Object(c["a"])(Object(o["a"])().mark((function e(){var s,a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.$request("/album",{id:t});case 2:s=e.sent,s=s.data,a=s.songs,a.forEach((function(t,i){a[i].dt=Object(l["b"])(t.dt)})),s.songsObj={songs:a},i.singerAlbum.push(s);case 8:case"end":return e.stop()}}),e)})))()},handleRowDbClick:function(t){var i=t.id,e=t.index,s=t.listId;if(this.isDbc=!0,this.handleViewDOM(i,s,e),s.toString()!==this.$route.params.id.toString()){var a=this.singerAlbum.findIndex((function(t){return t.album.id.toString()===s.toString()}));this.$store.commit("updateMusicId",i),parseInt(s)!==this.$store.state.musicListId&&this.$store.commit("updateMusicList",{musicList:this.singerAlbum[a].songs,musicListId:parseInt(s)})}else this.$store.commit("updateMusicId",i),this.$route.params.id!==this.$store.state.musicListId&&this.$store.commit("updateMusicList",{musicList:this.topSongs.topSongs,musicListId:this.$route.params.id})},getIsSub:function(){var t=this;this.isSub=this.$store.state.subSingerList.find((function(i){return i.id===t.$route.params.id}))},subSinger:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.$store.state.isLogin){i.next=3;break}return t.$message.error("请先登录!"),i.abrupt("return");case 3:return t.isSub=!t.isSub,i.next=6,t.$request("/artist/sub",{id:t.$route.params.id,t:t.isSub?1:0});case 6:t.getSubSingerList();case 7:case"end":return i.stop()}}),i)})))()},getSubSingerList:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){var e,s;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=Date.parse(new Date),i.next=3,t.$request("/artist/sublist",{limit:1e3,timestamp:e});case 3:s=i.sent,t.$store.commit("updateSubSingerList",s.data.data);case 5:case"end":return i.stop()}}),i)})))()},load:function(){this.disabled=!0,this.albumPage+=1,this.getAlbumInfo()},bottomLoad:function(){!0===this.singerMvInfo.hasMore&&(this.videoPage+=1,this.getSingerMv())},handleRowClick:function(t){document.querySelector(".selectRow")&&document.querySelector(".selectRow").classList.remove("selectRow"),t.classList.add("selectRow")},goToVideoDetail:function(t){var i=t.id;this.$store.state.isLogin?this.$router.push({name:"videoDetail",params:{id:i,type:"mv"}}):this.$message.error("登录后才能观看MV哦!")},clickListCardItem:function(t){var i=t.listId;this.$router.push({name:"album",params:{id:i}})},clickToSinger:function(t){this.$router.push({name:"singerDetail",params:{id:t}})},handleViewDOM:function(t,i,e){h.listId&&this.cleanStyle(h.i,h.listId);var s=document.querySelectorAll("table"),a=-1,n=-1;if(parseInt(i)===parseInt(this.$route.params.id))n=0;else{if(n=this.singerAlbum.findIndex((function(t){return t.album.id===parseInt(i)})),-1===n)return;n+=1}if(a=void 0===e?0===n?this.topSongs.topSongs.findIndex((function(i){return i.id===t})):this.singerAlbum[n-1].songs.findIndex((function(i){return i.id===t})):e,s[n]&&s[n].children[a]){var r=s[n].children[a];r.querySelector(".index").innerHTML="<i class='iconfont icon-yinliang' style='color:#ff4e4e'></i>",r.querySelector(".musicName").style.color="#ff4e4e",h.i=a,h.listId=i.toString(),h.singerId=this.$route.params.id.toString(),this.$store.commit("updateCurrentRowInfo",h)}},cleanStyle:function(t,i){var e=document.querySelectorAll("table"),s=-1;if(i.toString()===this.$route.params.id.toString())s=0;else{if(s=this.singerAlbum.findIndex((function(t){return t.album.id.toString()===i.toString()})),-1===s)return;s+=1}if(e[s]&&e[s].children[t]){var a=e[s].children[t];a.querySelector(".index").innerHTML=t+1,a.querySelector(".musicName").style.color="#1f1f1f"}},allTopSongs:function(){var t=this;this.topSongs.isOpen=!0,this.isCheckAllShow=!1,setTimeout((function(){t.$store.state.currentRowInfo.singerId===t.$route.params.id&&t.handleViewDOM(t.$store.state.musicId,t.$store.state.musicListId)}),500)},getSimiArtistInfo:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){var e;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$request("/simi/artist",{id:t.$route.params.id});case 2:e=i.sent,t.simiArtistList=e.data.artists;case 4:case"end":return i.stop()}}),i)})))()},clickTab:function(t){"1"===t.index&&0===this.singerMvInfo.mvs.length&&this.getSingerMv(),"3"===t.index&&0===this.simiArtistList.length&&this.getSimiArtistInfo()}},created:function(){this.getSingerInfo()},mounted:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function i(){return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getSingerTopSongs();case 2:return i.next=4,t.getAlbumInfo();case 4:if(t.$nextTick((function(){t.$store.state.currentRowInfo.singerId===t.$route.params.id&&t.handleViewDOM(t.$store.state.musicId,t.$store.state.musicListId)})),!t.$store.state.isLogin){i.next=10;break}if(null!=t.$store.state.subSingerList){i.next=9;break}return i.next=9,t.getSubSingerList();case 9:t.getIsSub();case 10:case"end":return i.stop()}}),i)})))()},watch:n({singerAlbum:function(){var t=this;0!==this.singerAlbum.length&&this.isAlbumMore?this.disabled=!1:this.disabled=!0,clearTimeout(r),r=setTimeout((function(){t.$store.state.currentRowInfo.singerId===t.$route.params.id&&t.handleViewDOM(t.$store.state.musicId,t.$store.state.musicListId)}),500)},"$store.state.isMusicLoad":function(t){t||(this.isDbc=!1)},"$store.state.musicId":function(t,i){this.isDbc||this.handleViewDOM(this.$store.state.musicId,this.$store.state.musicListId)}},"singerAlbum",(function(){var t=this;clearTimeout(r),r=setTimeout((function(){t.$store.state.currentRowInfo.singerId===t.$route.params.id&&t.handleViewDOM(t.$store.state.musicId,t.$store.state.musicListId)}),500)}))},b=v,p=(e("7bee"),e("2877")),g=Object(p["a"])(b,s,a,!1,null,"db271318",null);i["default"]=g.exports},"7bee":function(t,i,e){"use strict";e("c990")},"8f75":function(t,i,e){"use strict";e("0185")},"93ea":function(t,i,e){},9916:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],ref:"listCard",staticClass:"listCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.listCardData,(function(i,s){return e("div",{key:s,staticClass:"listCardItem",on:{click:function(e){return t.clickListCardItem(i.id)}}},[e("div",{staticClass:"image"},[e("img",{attrs:{src:(i.picUrl||i.coverImgUrl)+"?param=400y400",alt:""}})]),e("div",{staticClass:"title"},[t._v(t._s(i.name))])])})),0)},a=[],n={name:"ListCard",props:{listCardData:{type:Array,default:function(){return[]}},isLoad:{type:Boolean,default:function(){return!1}}},data:function(){return{disabled:!0}},methods:{clickListCardItem:function(t){this.$emit("clickListCardItem",t)},load:function(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{listCardData:function(){!0===this.isLoad&&(0!==this.listCardData.length?this.disabled=!1:this.disabled=!0)}}},r=n,o=(e("5b37"),e("2877")),c=Object(o["a"])(r,s,a,!1,null,"556776df",null);i["a"]=c.exports},a16d:function(t,i,e){},c990:function(t,i,e){},cf90:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"VideoListCard"},["singerMv"==t.videoType||"mv"==t.videoType?e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"videoListCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.videoList,(function(i,s){return e("div",{key:s,staticClass:"cardItem",on:{click:function(e){return t.clickListCardItem(i.id,s,i.type)}}},[e("div",{staticClass:"videoCover"},[e("img",{attrs:{src:("singerMv"==t.videoType?i.imgurl:i.cover)+"?param=680y400",alt:""}}),e("div",{staticClass:"playCount"},[e("i",{staticClass:"iconfont icon-shipin"}),t._v(t._s(t._f("handleNum")(i.playCount))+" ")]),"singerMv"==t.videoType?e("div",{staticClass:"videoTime"},[t._v(" "+t._s(t._f("handleMusicTime")(i.duration))+" ")]):t._e()]),e("div",{staticClass:"videoTitle"},[t._v(t._s(i.name))]),"mv"==t.videoType?e("div",{staticClass:"singer"},[t._v(t._s(i.artistName))]):t._e()])})),0):"video"==t.videoType?e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"videoListCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.videoList,(function(i,s){return e("div",{key:s,staticClass:"cardItem",on:{click:function(e){return t.clickListCardItem(i.vid||i.data.vid,s,i.type)}}},[e("div",{staticClass:"videoCover"},[e("img",{attrs:{src:(i.coverUrl||i.data.coverUrl)+"?param=1260y800",alt:""}}),e("div",{staticClass:"playCount"},[e("i",{staticClass:"iconfont icon-shipin"}),t._v(t._s(t._f("handleNum")(i.playTime||i.data.playTime))+" ")]),e("div",{staticClass:"videoTime"},[t._v(" "+t._s(t._f("handleMusicTime")(i.durationms||i.data.durationms))+" ")])]),e("div",{staticClass:"videoTitle"},[t._v(t._s(i.title||i.data.title))])])})),0):t._e()])},a=[],n=e("aa2a"),r={name:"VideoListCard",data:function(){return{disabled:!0}},props:{videoList:{type:Array,default:function(){return[]}},isLoad:{type:Boolean,default:function(){return!1}},videoType:{type:String,default:function(){return"singerMv"}}},methods:{clickListCardItem:function(t,i,e){this.$emit("clickListCardItem",{id:t,index:i,type:e})},load:function(){this.$emit("bottomLoad"),this.disabled=!0}},filters:{handleMusicTime:n["b"],handleNum:n["c"]},watch:{videoList:function(){!0===this.isLoad&&(0!==this.videoList.length?this.disabled=!1:this.disabled=!0)}}},o=r,c=(e("8f75"),e("2877")),l=Object(c["a"])(o,s,a,!1,null,"48ea44aa",null);i["a"]=l.exports}}]);
//# sourceMappingURL=chunk-fdb022a2.747f98e5.js.map