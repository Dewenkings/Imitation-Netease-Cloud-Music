{"version":3,"sources":["webpack:///./src/views/videoDetail/VideoDetail.vue?4182","webpack:///src/views/videoDetail/VideoDetail.vue","webpack:///./src/views/videoDetail/VideoDetail.vue?0713","webpack:///./src/views/videoDetail/VideoDetail.vue","webpack:///./src/views/videoDetail/VideoDetail.vue?c31d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$route","params","type","attrs","videoUrl","videoInfo","cover","coverUrl","on","playVideo","$event","goToPersonal","artists","img1v1Url","creator","avatarUrl","name","nickname","title","_f","publishTime","playCount","playTime","class","isLike","isSub","_m","_e","directives","rawName","value","expression","comments","ref","hotComments","id","getMvComment","getVideoComment","scrollToComment","slot","info","$refs","floorComment","commentId","nickName","_l","item","index","key","goToRelatedVideo","vid","durationms","userName","staticRenderFns","components","Comment","GoTop","data","relatedVideo","commentsPage","isCommentLoading","methods","getRelatedVideo","res","getVideoDetail","getVideoUrl","getMvDetail","mvid","getMvUrl","timestamp","Date","offset","videoDetail","behavior","top","document","commentTitle","uid","getIsSub","getIsLike","likeVideo","t","getLikeVideoList","limit","getSubVideoList","created","filters","handleNum","handleMusicTime","showDate","watch","component"],"mappings":"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","file":"js/chunk-13029846.4d40d8ba.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.videoUrl)?_c('div',{staticClass:\"videoDetail\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$route.params.type==\"mv\" ? \"MV详情\" : \"视频详情\")+\" \")]),_c('div',{staticClass:\"videoShow\"},[_c('video',{attrs:{\"src\":_vm.videoUrl,\"controls\":\"\",\"width\":\"496px\",\"height\":\"284px\",\"poster\":_vm.$route.params.type == 'mv' ? _vm.videoInfo.cover : _vm.videoInfo.coverUrl},on:{\"play\":_vm.playVideo}})]),(_vm.$route.params.type == 'mv' ? _vm.videoInfo.cover : _vm.videoInfo.coverUrl)?_c('div',{staticClass:\"videoInfo\"},[_c('div',{staticClass:\"user\"},[_c('div',{staticClass:\"avatar\",on:{\"click\":function($event){return _vm.goToPersonal()}}},[_c('img',{attrs:{\"src\":_vm.$route.params.type == 'mv' ? _vm.videoInfo.artists[0].img1v1Url : _vm.videoInfo.creator.avatarUrl,\"alt\":\"\"}})]),_c('div',{staticClass:\"userName\",on:{\"click\":function($event){return _vm.goToPersonal()}}},[_vm._v(\" \"+_vm._s(_vm.$route.params.type == 'mv' ? _vm.videoInfo.artists[0].name : _vm.videoInfo.creator.nickname)+\" \")])]),_c('div',{staticClass:\"videoTitle\"},[_vm._v(_vm._s(_vm.$route.params.type == \"mv\" ? _vm.videoInfo.name : _vm.videoInfo.title))]),_c('div',{staticClass:\"otherInfo\"},[_c('div',[_vm._v(\" 发布：\"+_vm._s(_vm._f(\"showDate\")(_vm.$route.params.type == \"mv\" ? _vm.videoInfo.publishTime : _vm.videoInfo.publishTime))+\" \")]),_c('div',[_vm._v(\" 播放：\"+_vm._s(_vm._f(\"handleNum\")((_vm.$route.params.type == \"mv\" ? _vm.videoInfo.playCount : _vm.videoInfo.playTime)))+\" \")])]),_c('div',{staticClass:\"buttons\"},[_c('div',{staticClass:\"buttonItem\"},[_c('i',{staticClass:\"iconfont icon-good\",class:_vm.isLike ? 'red' : ''}),_vm._v(\" \"+_vm._s(_vm.isLike ? '已赞' : '赞')+\" \")]),_c('div',{staticClass:\"buttonItem\"},[_c('i',{staticClass:\"iconfont icon-xihuan\",class:_vm.isSub ? 'red' : ''}),_vm._v(\" \"+_vm._s(_vm.isSub ? '已收藏' : '收藏')+\" \")]),_vm._m(0)])]):_vm._e(),_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"title commentTitle\"},[_vm._v(\"评论\")]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isCommentLoading),expression:\"isCommentLoading\"}],staticClass:\"commentList\"},[(_vm.comments.hotComments)?_c('comment',{ref:\"hotComments\",attrs:{\"comments\":_vm.comments.hotComments,\"commentType\":_vm.$route.params.type == 'mv' ? 'mv' : 'video',\"commentId\":_vm.$route.params.id + ''},on:{\"getComment\":function($event){_vm.$route.params.type == 'mv' ? _vm.getMvComment() : _vm.getVideoComment()},\"scrollToComment\":_vm.scrollToComment}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"精彩评论\")])]):_vm._e(),_c('comment',{attrs:{\"comments\":_vm.comments.comments,\"commentType\":_vm.$route.params.type == 'mv' ? 'mv' : 'video',\"commentId\":_vm.$route.params.id + '',\"isHotComment\":_vm.comments.hotComments ? false : true},on:{\"getComment\":function($event){_vm.$route.params.type == 'mv' ? _vm.getMvComment() : _vm.getVideoComment()},\"scrollToComment\":_vm.scrollToComment,\"transToHotComment\":function (info) { return _vm.$refs.hotComments.floorComment(info.commentId, info.nickName); }}},[_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"最新评论\")])])],1)])]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"相关推荐\")]),_vm._l((_vm.relatedVideo),function(item,index){return _c('div',{key:index,staticClass:\"relatedVideoItem\",on:{\"click\":function($event){return _vm.goToRelatedVideo(item.vid)}}},[_c('div',{staticClass:\"relatedVideoItemCover\"},[_c('img',{attrs:{\"src\":item.coverUrl + '?param=300y180',\"alt\":\"\"}}),_c('div',{staticClass:\"relatedVideoItemPlayCount\"},[_c('i',{staticClass:\"iconfont icon-shipin\"}),_vm._v(\" \"+_vm._s(_vm._f(\"handleNum\")(item.playTime))+\" \")]),_c('div',{staticClass:\"relatedVideoItemTime\"},[_vm._v(\" \"+_vm._s(_vm._f(\"handleMusicTime\")(item.durationms))+\" \")])]),_c('div',{staticClass:\"relatedVideoItemInfo\"},[_c('div',{staticClass:\"relatedVideoItemTitle\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"creator\"},[_vm._v(\"by \"+_vm._s(item.creator[0].userName))])])])})],2),_c('go-top',{attrs:{\"scrollObj\":\".videoDetail\"}})],1):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buttonItem\"},[_c('i',{staticClass:\"iconfont icon-zhuanfa\"}),_c('span',[_vm._v(\"分享\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"videoDetail\" v-if=\"videoUrl\">\n    <div class=\"left\">\n      <!-- 详情展示 -->\n      <div class=\"title\">\n        {{$route.params.type==\"mv\" ?  \"MV详情\" : \"视频详情\"}}\n      </div>\n      <div class=\"videoShow\">\n        <video :src=\"videoUrl\"\n        controls\n        width=\"496px\"\n        height=\"284px\"\n        @play=\"playVideo\"\n        :poster=\"\n          $route.params.type == 'mv' ? videoInfo.cover : videoInfo.coverUrl\n        \">\n        </video>\n      </div>\n      <!-- 视频详情信息 -->\n      <div\n        class=\"videoInfo\"\n        v-if=\"$route.params.type == 'mv' ? videoInfo.cover : videoInfo.coverUrl\">\n        <div class=\"user\">\n          <div class=\"avatar\" @click=\"goToPersonal()\">\n            <img :src=\"$route.params.type == 'mv' ? videoInfo.artists[0].img1v1Url : videoInfo.creator.avatarUrl\" alt=\"\">\n          </div>\n          <div class=\"userName\" @click=\"goToPersonal()\">\n            {{ $route.params.type == 'mv' ? videoInfo.artists[0].name : videoInfo.creator.nickname }}\n          </div>\n        </div>\n        <div class=\"videoTitle\">{{$route.params.type == \"mv\" ? videoInfo.name : videoInfo.title}}</div>\n        <div class=\"otherInfo\">\n          <div>\n            发布：{{$route.params.type == \"mv\"\n                ? videoInfo.publishTime\n                : videoInfo.publishTime | showDate}}\n          </div>\n          <div>\n            播放：{{($route.params.type == \"mv\"\n                ? videoInfo.playCount\n                : videoInfo.playTime) | handleNum}}\n          </div>\n        </div>\n        <div class=\"buttons\">\n          <div class=\"buttonItem\">\n            <!-- 三元表达式绑定样式 -->\n            <i class=\"iconfont icon-good\" :class=\"isLike ? 'red' : ''\"></i>\n            <!-- 需要根据用户的返回信息决定 -->\n            <!-- <span>赞</span> -->\n            {{isLike ? '已赞' : '赞'}}\n          </div>\n          <div class=\"buttonItem\">\n            <i class=\"iconfont icon-xihuan\" :class=\"isSub ? 'red' : ''\"></i>\n            <!-- <span>收藏</span> -->\n            {{isSub ? '已收藏' : '收藏'}}\n          </div>\n          <div class=\"buttonItem\">\n            <i class=\"iconfont icon-zhuanfa\"></i>\n            <span>分享</span>\n          </div>\n        </div>\n      </div>\n      <!-- 评论区 -->\n      <div class=\"comment\">\n        <div class=\"title commentTitle\">评论</div>\n        <div class=\"commentList\" v-loading=\"isCommentLoading\">\n          <!-- 精彩评论 -->\n          <comment\n            :comments=\"comments.hotComments\"\n            v-if=\"comments.hotComments\"\n            :commentType=\"$route.params.type == 'mv' ? 'mv' : 'video'\"\n            :commentId=\"$route.params.id + ''\"\n            @getComment=\"\n              $route.params.type == 'mv' ? getMvComment() : getVideoComment()\n            \"\n            @scrollToComment=\"scrollToComment\"\n            ref=\"hotComments\"\n            ><div slot=\"title\">精彩评论</div></comment\n          >\n          <!-- 最新评论 -->\n          <comment\n            :comments=\"comments.comments\"\n            :commentType=\"$route.params.type == 'mv' ? 'mv' : 'video'\"\n            :commentId=\"$route.params.id + ''\"\n            :isHotComment=\"comments.hotComments ? false : true\"\n            @getComment=\"\n              $route.params.type == 'mv' ? getMvComment() : getVideoComment()\n            \"\n            @scrollToComment=\"scrollToComment\"\n            @transToHotComment=\"\n              (info) =>\n                $refs.hotComments.floorComment(info.commentId, info.nickName)\n            \"\n            ><div slot=\"title\">最新评论</div></comment\n          >\n        </div>\n        <!-- 分页 -->\n      </div>\n    </div>\n    <!-- 推荐视频 -->\n    <div class=\"right\">\n      <div class=\"title\">相关推荐</div>\n      <div\n      class=\"relatedVideoItem\"\n      v-for=\"(item, index) in relatedVideo\"\n      :key=\"index\"\n      @click=\"goToRelatedVideo(item.vid)\">\n        <div class=\"relatedVideoItemCover\">\n          <img :src=\"item.coverUrl + '?param=300y180'\" alt=\"\">\n          <div class=\"relatedVideoItemPlayCount\">\n            <i class=\"iconfont icon-shipin\"></i> {{ item.playTime | handleNum }}\n          </div>\n          <div class=\"relatedVideoItemTime\">\n            {{ item.durationms | handleMusicTime }}\n          </div>\n        </div>\n        <div class=\"relatedVideoItemInfo\">\n          <div class=\"relatedVideoItemTitle\">{{ item.title }}</div>\n          <div class=\"creator\">by {{ item.creator[0].userName }}</div>\n        </div>\n      </div>\n    </div>\n    <!-- 返回顶部 -- to do -->\n    <go-top scrollObj=\".videoDetail\"></go-top>\n  </div>\n</template>\n\n<script>\nimport { handleNum, handleMusicTime, formatDate } from 'plugins/util.js'\nimport Comment from 'components/comment/Comment.vue'\nimport GoTop from 'components/goTop/GoTop.vue'\n\nexport default {\n  components: { Comment, GoTop },\n  name: 'videoDetail',\n  data () {\n    return {\n      videoInfo: {},\n      videoUrl: '',\n      // 相关视频数据\n      relatedVideo: [],\n      // 评论\n      comments: {},\n      // 评论页数\n      commentsPage: 1,\n      // 用户是否收藏该视频\n      isSub: false,\n      // 是否正在加载评论\n      isCommentLoading: false,\n      // 用户是否喜欢该视频\n      isLike: false\n    }\n  },\n  methods: {\n    // 请求推荐视频\n    async getRelatedVideo () {\n      const res = await this.$request('/related/allvideo', {\n        id: this.$route.params.id\n      })\n      console.log('推荐的视频:', res)\n      this.relatedVideo = res.data.data\n    },\n    // 获取视频详情\n    async getVideoDetail () {\n      const res = await this.$request('/video/detail', {\n        id: this.$route.params.id\n      })\n      console.log('视频详情：', res)\n      this.videoInfo = res.data.data\n    },\n    // 获取视频播放地址\n    async getVideoUrl () {\n      const res = await this.$request('/video/url', {\n        id: this.$route.params.id\n      })\n      console.log('视频播放地址：', res)\n      this.videoUrl = res.data.urls[0].url\n    },\n    // 获取MV详情\n    async getMvDetail () {\n      const res = await this.$request('/mv/detail', {\n        mvid: this.$route.params.id\n      })\n      console.log('MV详情：', res)\n      this.videoInfo = res.data.data\n    },\n    // 获取MV播放地址\n    async getMvUrl () {\n      const res = await this.$request('/mv/url', {\n        id: this.$route.params.id\n      })\n      console.log('MV播放地址：', res)\n      this.videoUrl = res.data.data.url\n    },\n    // 获取mv评论数据\n    async getMvComment () {\n      // 获取时间戳\n      var timestamp = Date.parse(new Date())\n      this.isCommentLoading = true\n      const res = await this.$request('/comment/mv', {\n        id: this.$route.params.id,\n        offset: 20 * (this.commentsPage - 1),\n        timestamp\n      })\n      if (res.data.code !== 200) {\n        this.$message.error('获取评论失败,请稍后重试!')\n        return\n      }\n      console.log('mv评论：', res)\n    },\n    // 滚动到输入框\n    scrollToComment () {\n      const videoDetail = document.querySelector('.videoDetail')\n      const commentTitle = document.querySelector('.commentTitle')\n      // console.log([commentTitle]);\n      videoDetail.scrollTo({\n        behavior: 'smooth',\n        top: commentTitle.offsetTop - 70\n      })\n    },\n    // 获取视频评论\n    async getVideoComment (type) {\n      // 获取时间戳\n      var timestamp = Date.parse(new Date())\n      this.isCommentLoading = true\n\n      // 清空最新评论数据\n      // this.comments.comments = [];\n\n      if (type === 'changePage') {\n        const videoDetail = document.querySelector('.videoDetail')\n        const commentTitle = document.querySelector('.commentTitle')\n        // console.log([commentTitle]);\n        videoDetail.scrollTo({\n          behavior: 'smooth',\n          top: commentTitle.offsetTop - 70\n        })\n      }\n\n      const res = await this.$request('/comment/video', {\n        id: this.$route.params.id,\n        offset: 20 * (this.commentsPage - 1),\n        timestamp\n      })\n\n      this.isCommentLoading = false\n      //   console.log(res);\n      if (res.data.code !== 200) {\n        this.$message.error('获取评论失败,请稍后重试!')\n        return\n      }\n      this.comments = res.data\n    },\n    // 监听video播放的事件\n    playVideo () {\n      this.$store.commit('changePlayState', false)\n    },\n    // 点击跳转至personal页面的回调\n    goToPersonal () {\n      const uid =\n        this.$route.params.type === 'mv'\n          ? this.videoInfo.artists[0].id\n          : this.videoInfo.creator.userId\n      if (this.$route.params.type === 'mv') {\n        this.$router.push({ name: 'singerDetail', params: { id: uid } })\n      } else {\n        this.$router.push({ name: 'personal', params: { uid } })\n      }\n    },\n    goToRelatedVideo (id) {\n      this.$router.push({\n        name: 'videoDetail', params: { id: id, type: 'video' }\n      })\n    },\n    // 判断用户是否收藏了该视频\n    getIsSub () {\n      console.log(this.isSub)\n      this.isSub = this.$store.state.subVideoList.find(\n        (item) => item.vid === this.$route.params.id\n      )\n    },\n    // 判断用户是否喜欢了该视频\n    getIsLike () {\n      if (this.$route.params.type === 'mv') {\n        this.isLike = this.$store.state.likeVideoList.find(\n          (item) => item.mlogBaseData.id === this.$route.params.id\n        )\n      } else {\n        // 因为请求的喜欢列表中的视频id是mlogid 要获取vid还需要另外单独请求  这里我直接对比标题和时长 若都对的上则认定为是同一个视频\n        this.isLike = this.$store.state.likeVideoList.find(\n          (item) =>\n            item.mlogBaseData.desc === this.videoInfo.description &&\n            item.mlogBaseData.dration === this.videoInfo.durationms\n        )\n      }\n    },\n    // 用户点击了点赞按钮的回调\n    async likeVideo () {\n      this.isLike = !this.isLike\n      var timestamp = Date.parse(new Date())\n      const type = this.$route.params.type === 'mv' ? 1 : 5\n      // 请求\n      const res = await this.$request('/resource/like', {\n        type,\n        id: this.$route.params.id,\n        t: this.isLike ? 1 : 0,\n        timestamp\n      })\n      console.log(res)\n      this.getLikeVideoList()\n    },\n    // 请求用户喜欢的视频列表\n    async getLikeVideoList () {\n      const timestamp = Date.parse(new Date())\n      const res = await this.$request('/playlist/mylike', {\n        limit: 1000,\n        timestamp\n      })\n      console.log(res)\n      if (res.data.code !== 200) {\n        this.$message.error('获取用户点赞视频失败,请稍后重试!')\n        return\n      }\n      this.$store.commit('updateLikeVideoList', res.data.data.feeds)\n      console.log('请求了用户喜欢的视频列表')\n    },\n    // 请求用户收藏的视频列表\n    async getSubVideoList () {\n      const timestamp = Date.parse(new Date())\n      const res = await this.$request('/mv/sublist', { limit: 1000, timestamp })\n      if (res.data.code !== 200) {\n        this.$message.error('获取用户收藏视频失败,请稍后重试!')\n        return\n      }\n      this.$store.commit('updateSubVideoList', res.data.data)\n      console.log('请求了用户收藏的视频列表')\n    }\n\n  },\n  async created () {\n    // 获取相关推荐\n    this.getRelatedVideo()\n    // 判断请求参数是哪种类型，从而请求数据\n    if (this.$route.params.type === 'mv') {\n      await this.getMvDetail()\n      this.getMvUrl()\n      this.getMvComment()\n    } else if (this.$route.params.type === 'video') {\n      await this.getVideoDetail()\n      this.getVideoUrl()\n      this.getVideoComment()\n    }\n    if (this.$store.state.subVideoList == null) {\n      await this.getSubVideoList()\n    }\n    this.getIsSub()\n    if (this.$store.state.likeVideoList == null) {\n      await this.getLikeVideoList()\n    }\n    this.getIsLike()\n  },\n  filters: {\n    handleNum,\n    handleMusicTime,\n    showDate (value) {\n      // 1、先将时间戳转成Date对象\n      const date = new Date(value)\n\n      // 2、将date进行格式化\n      return formatDate(date, 'yyyy-MM-dd')\n    }\n  },\n  watch: {\n\n  }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .left {\n    width: 500px;\n  }\n  .videoDetail {\n    display: flex;\n    justify-content: center;\n    // 关于超出页面\n    // height: calc(80vh - 105px);\n    overflow-y: scroll;\n  }\n  .title {\n    margin: 10px 0;\n    color: black;\n    font-weight: 600;\n  }\n  // .videoShow {\n  //   width: 500px;\n  //   height: 500px;\n  // }\n  // video {\n  //   width: 100%;\n  // }\n  .user {\n    display: flex;\n    align-items: center;\n    margin: 10px 0;\n  }\n  .avatar {\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n  }\n  .avatar img {\n    border-radius: 50%;\n    width: 100%;\n  }\n  .userName {\n    font-size: 12px;\n    margin-left: 10px;\n    color: rgb(36, 36, 36);\n    cursor: pointer;\n  }\n  .videoTitle {\n    font-size: 20px;\n    font-weight: bold;\n    color: #1b1b1b;\n    margin: 20px 0 10px;\n  }\n  .otherInfo {\n    display: flex;\n    justify-items: center;\n    font-size: 12px;\n    color: #aaa;\n  }\n  .otherInfo div {\n    margin-right: 20px;\n    transform: scale(0.9) translateX(-5%);\n  }\n  .buttons {\n    display: flex;\n    justify-items: center;\n    margin: 20px 0;\n  }\n  .buttonItem {\n    padding: 5px 20px;\n    border: 1px solid rgb(228, 215, 219);\n    border-radius: 50px;\n    margin-right: 10px;\n    font-size: 12px;\n  }\n  .buttonItem i {\n    font-size: 12px;\n    margin-right: 3px;\n  }\n\n  // 右边相关推荐\n  .right {\n    margin-left: 20px;\n  }\n  // .relatedVideoItemCover {\n  //   display: flex;\n  // }\n  .relatedVideoItem {\n  display: flex;\n  margin-bottom: 5px;\n  cursor: pointer;\n}\n\n.relatedVideoItemCover {\n  position: relative;\n  margin-right: 10px;\n}\n\n.relatedVideoItemCover img {\n  width: 150px;\n  height: 90px;\n  border-radius: 10px;\n}\n.relatedVideoItemPlayCount {\n  position: absolute;\n  top: 0;\n  right: 5px;\n  font-size: 12px;\n  color: white;\n  transform: scale(0.9);\n}\n.relatedVideoItemTime {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  font-size: 12px;\n  color: white;\n  transform: scale(0.9);\n}\n.relatedVideoItemInfo {\n  font-size: 12px;\n  color: rgb(31, 30, 30);\n  margin: 12px 0;\n  width: 140px;\n}\n.relatedVideoItemTitle {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoDetail.vue?vue&type=template&id=263a8784&scoped=true&\"\nimport script from \"./VideoDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoDetail.vue?vue&type=style&index=0&id=263a8784&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"263a8784\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoDetail.vue?vue&type=style&index=0&id=263a8784&lang=less&scoped=true&\""],"sourceRoot":""}