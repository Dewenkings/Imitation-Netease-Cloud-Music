{"version":3,"sources":["webpack:///./src/components/listTable/ListTable.vue?ebc4","webpack:///src/components/listTable/ListTable.vue","webpack:///./src/components/listTable/ListTable.vue?b2db","webpack:///./src/components/listTable/ListTable.vue","webpack:///./src/components/listCard/ListCard.vue?879f","webpack:///./src/components/listTable/ListTable.vue?dfad","webpack:///./src/components/listCard/ListCard.vue?bb4e","webpack:///src/components/listCard/ListCard.vue","webpack:///./src/components/listCard/ListCard.vue?55db","webpack:///./src/components/listCard/ListCard.vue","webpack:///./src/views/discover/discoverChildren/Ranking.vue?6f06","webpack:///src/views/discover/discoverChildren/Ranking.vue","webpack:///./src/views/discover/discoverChildren/Ranking.vue?ac30","webpack:///./src/views/discover/discoverChildren/Ranking.vue","webpack:///./src/views/discover/discoverChildren/Ranking.vue?a470"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","officialListDetailItem","coverImgUrl","cover","on","$event","clickCheckAll","id","_t","_l","tracks","slice","topSongs","isOpen","songs","item","index","key","handleRowClick","handleRowDbClick","_v","_s","name","dt","ar","directives","rawName","value","expression","staticRenderFns","props","type","default","listId","isCheckAllShow","data","methods","event","path","component","ref","disabled","clickListCardItem","picUrl","listCardData","isLoad","load","watch","officialListDetail","length","globalList","_e","components","ListTable","ListCard","officialList","getAllRankings","res","getMusicListDetail","result","document","musicList","musicListId","params","created"],"mappings":"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","file":"js/chunk-b8c0bd9c.9a2f2e5d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"listTable\"},[_c('div',{staticClass:\"listCover\"},[_c('img',{attrs:{\"src\":_vm.officialListDetailItem.coverImgUrl || _vm.cover,\"alt\":\"\"},on:{\"click\":function($event){return _vm.clickCheckAll(_vm.officialListDetailItem.id)}}})]),_c('div',{staticClass:\"listContainer\"},[_vm._t(\"header\"),_c('table',_vm._l(((_vm.officialListDetailItem.tracks &&\n            _vm.officialListDetailItem.tracks.slice(0, 5)) || (_vm.officialListDetailItem.topSongs &&\n            (_vm.officialListDetailItem.isOpen\n              ? _vm.officialListDetailItem.topSongs\n              : _vm.officialListDetailItem.topSongs.slice(0, 10))) || _vm.officialListDetailItem.songs.slice(0, 10)),function(item,index){return _c('tr',{key:index,staticClass:\"listRows\",on:{\"click\":_vm.handleRowClick,\"dblclick\":function($event){return _vm.handleRowDbClick(_vm.officialListDetailItem.id || item.id, index)}}},[_c('td',{staticClass:\"index\"},[_vm._v(_vm._s(index + 1))]),_c('td',{staticClass:\"musicName\"},[_vm._v(_vm._s(item.name))]),_c('td',{staticClass:\"musicTime\"},[_vm._v(_vm._s(item.dt))]),_c('td',{staticClass:\"singer\"},[_vm._v(_vm._s(item.ar[0].name))])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCheckAllShow),expression:\"isCheckAllShow\"}],staticClass:\"checkAll\",on:{\"click\":function($event){return _vm.clickCheckAll(_vm.officialListDetailItem.id)}}},[_vm._v(\" 查看全部 \"),_c('i',{staticClass:\"iconfont icon-arrow-right-bold\"})])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"listTable\">\n    <!-- 先是左边的图像 -->\n    <div class=\"listCover\">\n      <!-- 三元表达式进行查看传入的是否存在封面\n        点击专辑页面跳转专辑详情页面中 -->\n        <!-- @click=\" officialListDetailItem.songs.length\n        ? clickCheckAll(officialListDetailItem.songs.id) : ''\" -->\n      <img :src=\"officialListDetailItem.coverImgUrl || cover\"\n        alt=\"\"\n        @click=\"clickCheckAll(officialListDetailItem.id)\"\n        >\n    </div>\n    <!-- 专辑歌曲列表的展示 -->\n    <div class=\"listContainer\">\n      <slot name=\"header\"></slot>\n      <table>\n        <tr\n          class=\"listRows\"\n          v-for=\"(item, index) in (officialListDetailItem.tracks &&\n              officialListDetailItem.tracks.slice(0, 5)) || (officialListDetailItem.topSongs &&\n              (officialListDetailItem.isOpen\n                ? officialListDetailItem.topSongs\n                : officialListDetailItem.topSongs.slice(0, 10))) || officialListDetailItem.songs.slice(0, 10)\" :key=\"index\"\n                @click=\"handleRowClick\"\n              @dblclick=\"handleRowDbClick(officialListDetailItem.id || item.id, index)\"\n            >\n          <td class=\"index\">{{ index + 1 }}</td>\n          <td class=\"musicName\">{{item.name}}</td>\n          <td class=\"musicTime\">{{item.dt}}</td>\n          <td class=\"singer\">{{ item.ar[0].name }}</td>\n        </tr>\n      </table>\n\n      <!-- 对于专辑小于10首的,就无需进行跳转 -->\n      <div\n        class=\"checkAll\"\n        @click=\"clickCheckAll(officialListDetailItem.id)\"\n        v-show=\"isCheckAllShow\"\n      >\n        查看全部 <i class=\"iconfont icon-arrow-right-bold\"></i>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ListTable',\n  props: {\n    officialListDetailItem: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    // 传过来的封面\n    cover: {\n      type: String,\n      default () {\n        return ''\n      }\n    },\n    // 传过来的listId\n    listId: {\n      type: String,\n      default () {\n        return ''\n      }\n    },\n    // 是否显示查看全部按钮\n    isCheckAllShow: {\n      type: Boolean,\n      default () {\n        return true\n      }\n    }\n  },\n  data () {\n    return {}\n  },\n  methods: {\n    // 点击行的回调 （选中）\n    handleRowClick (event) {\n      // 点击时，事件对象可能是td或tr，这里做下判断\n      let path\n      if (event.path[0].localName === 'tr') {\n        path = event.path[0]\n      } else {\n        path = event.path[1]\n      }\n      this.$emit('handleRowClick', path)\n    },\n    // 双击播放歌曲\n    handleRowDbClick (id, index) {\n      const listId = this.listId\n      this.$emit('handleRowDbClick', { id, index, listId })\n    },\n    // 点击查看全部的回调\n    // 这里传来的id是用于Ranking的\n    clickCheckAll (id) {\n      const listId = this.listId\n      this.$emit('clickCheckAll', { id, listId })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .listTable {\n    display: flex;\n    // width: 470px;\n    margin: 20px 0 50px 0;\n  }\n  .listCover {\n    width: 150px;\n    height: 150px;\n    margin-left: 20px;\n    cursor: pointer;\n  }\n  .listCover img {\n    width: 100%;\n    border-radius: 10px;\n  }\n  .listContainer {\n    width: 100%;\n    // width: calc(100% -200px);\n    margin-left: 30px;\n  }\n  table {\n    width: 95%;\n    border-collapse: collapse;\n    border-radius: 5px;\n    // 新加的\n    overflow: hidden;\n  }\n\n  .listRows {\n    height: 30px;\n    font-size: 12px;\n    color: rgb(153, 153, 153);\n    width: 100%;\n    display: flex;\n    align-items: center;\n    position: relative;\n  }\n  .listRows:nth-child(odd) {\n    background-color: #f9f9f9;\n  }\n  .listRows:hover {\n    background-color: #f4f4f4;\n  }\n\n  .index {\n    text-align: center;\n    line-height: 28px;\n    width: 30px;\n  }\n  .listRows .musicName {\n    color: rgb(31, 31, 31);\n    transform: translate(-5%, -5%) scale(0.9);\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    width: 80%;\n  }\n  .singer {\n    text-align: right;\n    position: absolute;\n    right: 60px;\n  }\n  .musicTime {\n    transform: scale(0.9);\n    text-align: right;\n    position: absolute;\n    right: 10px;\n  }\n\n  .checkAll {\n    color: rgb(134,134,134);\n    font-size: 12px;\n    transform: scale(0.9) translateX(-5%);\n    width: 100px;\n    height: 30px;\n    line-height: 30px;\n    cursor: pointer;\n    // 加了这个就出错了，出现两条滚动条\n    // position: absolute;\n    right: 0px;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListTable.vue?vue&type=template&id=5544798f&scoped=true&\"\nimport script from \"./ListTable.vue?vue&type=script&lang=js&\"\nexport * from \"./ListTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListTable.vue?vue&type=style&index=0&id=5544798f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5544798f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCard.vue?vue&type=style&index=0&id=556776df&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListTable.vue?vue&type=style&index=0&id=5544798f&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.load),expression:\"load\"}],ref:\"listCard\",staticClass:\"listCard\",attrs:{\"infinite-scroll-disabled\":_vm.disabled,\"infinite-scroll-distance\":300,\"infinite-scroll-immediate\":false}},_vm._l((_vm.listCardData),function(item,index){return _c('div',{key:index,staticClass:\"listCardItem\",on:{\"click\":function($event){return _vm.clickListCardItem(item.id)}}},[_c('div',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":(item.picUrl || item.coverImgUrl) + '?param=400y400',\"alt\":\"\"}})]),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.name))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"listCard\"\n    v-infinite-scroll=\"load\"\n    :infinite-scroll-disabled=\"disabled\"\n    :infinite-scroll-distance=\"300\"\n    :infinite-scroll-immediate=\"false\"\n    ref=\"listCard\"\n  >\n    <div\n      class=\"listCardItem\"\n      v-for=\"(item, index) in listCardData\"\n      :key=\"index\"\n      @click=\"clickListCardItem(item.id)\"\n    >\n      <div class=\"image\">\n        <img\n          :src=\"(item.picUrl || item.coverImgUrl) + '?param=400y400'\"\n          alt=\"\"\n        />\n      </div>\n      <div class=\"title\">{{ item.name }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ListCard',\n  props: {\n    listCardData: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    // 是否使用上拉触底事件\n    isLoad: {\n      type: Boolean,\n      default () {\n        return false\n      }\n    }\n  },\n  data () {\n    return {\n      // 无限滚动是否可用\n      disabled: true\n    }\n  },\n  methods: {\n    clickListCardItem (id) {\n      this.$emit('clickListCardItem', id)\n    },\n    // 上拉触底触发\n    load () {\n      //   console.log(\"滑动到底部\");\n      this.$emit('bottomLoad')\n      // 触发load后加载数据 期间不允许再次触发load事件\n      this.disabled = true\n    }\n  },\n  watch: {\n    //   数据更新后，可再次运行触发load事件\n    listCardData () {\n      if (this.isLoad === true) {\n        if (this.listCardData.length !== 0) {\n          this.disabled = false\n        } else {\n          this.disabled = true\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.listCard {\n  display: flex;\n  flex-wrap: wrap;\n  margin: 10px 0 0 20px;\n}\n\n.listCardItem {\n  width: 18.4%;\n  margin: 0 2% 20px 0;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.listCardItem:nth-child(5n) {\n  margin-right: 0;\n}\n\n.image {\n  width: 100%;\n  padding-bottom: 100%;\n  height: 0;\n  position: relative;\n}\n\n.image::after {\n  content: \"\";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: url(\"~assets/img/imgLoading.png\") no-repeat center;\n  background-size: contain;\n  border-radius: 10px;\n  z-index: -1;\n}\n\n.image img {\n  width: 100%;\n  border-radius: 10px;\n}\n\n.title {\n  margin-top: 8px;\n  padding: 0 2px;\n  font-size: 12px;\n  color: black;\n  line-height: 17px;\n  /* 两行溢出 */\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListCard.vue?vue&type=template&id=556776df&scoped=true&\"\nimport script from \"./ListCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ListCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListCard.vue?vue&type=style&index=0&id=556776df&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"556776df\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rankingContainer\"},[(_vm.officialListDetail.length != 0)?_c('div',{staticClass:\"ranking\"},[_c('div',{staticClass:\"offical\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"官方榜\")]),_vm._l((_vm.officialListDetail),function(item,index){return _c('list-table',{key:index,attrs:{\"officialListDetailItem\":item},on:{\"handleRowDbClick\":_vm.handleRowDbClick,\"clickCheckAll\":_vm.clickListCardItem}})})],2),_c('div',{staticClass:\"global\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"全球榜\")]),_c('list-card',{staticClass:\"listCard\",attrs:{\"listCardData\":_vm.globalList},on:{\"clickListCardItem\":_vm.clickListCardItem}})],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- 请求到数据前先不进行渲染，避免报错和影响美观 -->\n  <div class=\"rankingContainer\">\n    <div class=\"ranking\" v-if=\"officialListDetail.length != 0\">\n      <div class=\"offical\">\n        <div class=\"title\">官方榜</div>\n        <!-- 用自己封装的table组件算了 第三方的改起来问题太多了 -->\n        <list-table\n          :officialListDetailItem=\"item\"\n          v-for=\"(item, index) in officialListDetail\"\n          :key=\"index\"\n          @handleRowDbClick=\"handleRowDbClick\"\n          @clickCheckAll=\"clickListCardItem\"\n        ></list-table>\n      </div>\n      <div class=\"global\">\n        <div class=\"title\">全球榜</div>\n        <!-- 展示歌单列表 -->\n        <list-card\n          class=\"listCard\"\n          :listCardData=\"globalList\"\n          @clickListCardItem=\"clickListCardItem\"\n        ></list-card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { handleMusicTime } from 'plugins/util'\n\nimport ListTable from 'components/listTable/ListTable.vue'\nimport ListCard from 'components/listCard/ListCard.vue'\nexport default {\n  components: { ListTable, ListCard },\n  name: 'Ranking',\n  data () {\n    return {\n      officialList: [],\n      officialListDetail: [],\n      globalList: []\n    }\n  },\n  methods: {\n    // 请求\n    // 请求所有榜单\n    async getAllRankings () {\n      const res = await this.$request('/toplist')\n      console.log(res)\n      this.officialList = res.data.list.slice(0, 4)\n      this.globalList = res.data.list.slice(4)\n    },\n    // 根据榜单id请求详细数据\n    // 根据传来的 id 查询歌单\n    async getMusicListDetail (id) {\n      // console.log(this.$route.params.id);\n      let result = await this.$request('/playlist/detail', { id })\n      // console.log(result);\n      result = result.data.playlist\n      // 对时间进行处理\n      result.tracks.forEach((item, index) => {\n        result.tracks[index].dt = handleMusicTime(item.dt)\n      })\n      this.officialListDetail.push(result)\n    },\n\n    // 事件函数\n    // 行点击事件的回调\n    handleRowClick (event) {\n      // console.log(event);\n      if (document.querySelector('.selectRow')) {\n        document.querySelector('.selectRow').classList.remove('selectRow')\n      }\n      event.classList.add('selectRow')\n    },\n    // 行双击事件的回调\n    // id 歌单id   index 双击歌曲在歌单中的索引\n    handleRowDbClick ({ id, index }) {\n      // console.log(id);\n      // console.log(index);\n      const musicListIndex = this.officialListDetail.findIndex(\n        (item) => item.id === id\n      )\n      console.log(musicListIndex)\n      this.$store.commit(\n        'updateMusicId',\n        this.officialListDetail[musicListIndex].tracks[index].id\n      )\n      // 如果歌单发生变化,则提交歌单到vuex\n      if (id !== this.$store.state.musicListId) {\n        // 将歌单传到vuex\n        this.$store.commit('updateMusicList', {\n          musicList: this.officialListDetail[musicListIndex].tracks,\n          musicListId: id\n        })\n      }\n    },\n    // 点击榜单进入歌单详情界面\n    clickListCardItem (id) {\n      if (!this.$store.state.isLogin) {\n        this.$message.error('登录后才能查看全部歌曲哦!')\n        return\n      }\n      if (id.id) {\n        id = id.id\n      }\n      this.$router.push({ name: 'musicListDetail', params: { id } })\n    }\n  },\n  async created () {\n    await this.getAllRankings()\n    this.officialList.forEach((item) => {\n      this.getMusicListDetail(item.id)\n    })\n    // console.log(this.officialListDetail);\n  }\n}\n</script>\n\n<style scoped>\n.rankingContainer {\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  /* overflow: hidden; */\n}\n\n.ranking {\n  max-width: 1000px;\n  padding: 0 10px;\n}\n\n.listCard {\n  margin-top: 15px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ranking.vue?vue&type=template&id=4a74f586&scoped=true&\"\nimport script from \"./Ranking.vue?vue&type=script&lang=js&\"\nexport * from \"./Ranking.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ranking.vue?vue&type=style&index=0&id=4a74f586&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a74f586\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=0&id=4a74f586&scoped=true&lang=css&\""],"sourceRoot":""}