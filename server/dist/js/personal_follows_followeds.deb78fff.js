(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["personal_follows_followeds"],{2909:function(t,e,s){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function r(t){if(Array.isArray(t))return a(t)}s.d(e,"a",(function(){return c}));s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0"),s("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}s("fb6a"),s("b0c0"),s("ac1f"),s("00b4");function n(t,e){if(t){if("string"===typeof t)return a(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?a(t,e):void 0}}s("d9e2");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||i(t)||n(t)||o()}},"331c":function(t,e,s){"use strict";s("9f98")},"3bc6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"UserListCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.userList,(function(e,a){return s("div",{key:a,staticClass:"userItemContainer",on:{click:function(s){return t.clickUser(e.userId)}}},[s("div",{staticClass:"userItem"},[s("div",{staticClass:"left"},[s("img",{staticClass:"avatar",attrs:{src:e.avatarUrl+"?param=200y200",alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"nickName"},[t._v(t._s(e.nickname))]),s("div",{staticClass:"signature"},[t._v(" "+t._s(e.signature)+" ")]),"personalPage"==t.userType?s("div",{staticClass:"nums"},[s("div",{staticClass:"musicListNum"},[t._v(t._s("歌单: "+e.playlistCount))]),s("div",{staticClass:"fenge"},[t._v("|")]),s("div",{staticClass:"followedsNum"},[t._v(t._s("粉丝: "+e.followeds))])]):t._e()])])])})),0)},r=[],i={name:"UserListCard",props:{userList:{type:Array,default:function(){return[]}},isLoad:{type:Boolean,default:function(){return!1}},userType:{type:String,default:function(){return"personalPage"}}},data:function(){return{disabled:!0}},methods:{clickUser:function(t){this.$router.push({name:"personal",params:{uid:t}})},load:function(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{userList:function(){!0===this.isLoad&&(0!==this.userList.length?this.disabled=!1:this.disabled=!0)}}},n=i,o=(s("b7b6"),s("2877")),c=Object(o["a"])(n,a,r,!1,null,"59091b2d",null);e["a"]=c.exports},"5b37":function(t,e,s){"use strict";s("a16d")},7775:function(t,e,s){},"7c93":function(t,e,s){"use strict";s("7775")},8896:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Follows"},[s("div",{staticClass:"title"},[t._v(t._s(t.userName+"的关注"))]),s("user-list-card",{attrs:{userList:t.userList,isLoad:t.isMore},on:{bottomLoad:t.bottomLoad}}),s("go-top",{attrs:{scrollObj:".Follows"}})],1)},r=[],i=s("c7eb"),n=s("2909"),o=s("1da1"),c=s("3bc6"),u=s("7cff"),l={components:{UserListCard:c["a"],GoTop:u["a"]},name:"Followeds",data:function(){return{currentPage:1,userList:[],userName:"",isMore:!1}},methods:{getFolloweds:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var s,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request("/user/follows",{uid:t.$route.params.uid,offset:30*(t.currentPage-1)});case 2:a=e.sent,t.isMore=a.data.more,(s=t.userList).push.apply(s,Object(n["a"])(a.data.follow));case 5:case"end":return e.stop()}}),e)})))()},getUserInfo:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request("/user/detail?uid=".concat(t.$route.params.uid));case 2:s=e.sent,t.userName=s.data.profile.nickname;case 4:case"end":return e.stop()}}),e)})))()},bottomLoad:function(){this.currentPage+=1,this.getFolloweds()}},created:function(){this.getFolloweds(),this.getUserInfo()}},d=l,f=(s("9a78"),s("2877")),m=Object(f["a"])(d,a,r,!1,null,"33225310",null);e["default"]=m.exports},9916:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],ref:"listCard",staticClass:"listCard",attrs:{"infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":300,"infinite-scroll-immediate":!1}},t._l(t.listCardData,(function(e,a){return s("div",{key:a,staticClass:"listCardItem",on:{click:function(s){return t.clickListCardItem(e.id)}}},[s("div",{staticClass:"image"},[s("img",{attrs:{src:(e.picUrl||e.coverImgUrl)+"?param=400y400",alt:""}})]),s("div",{staticClass:"title"},[t._v(t._s(e.name))])])})),0)},r=[],i={name:"ListCard",props:{listCardData:{type:Array,default:function(){return[]}},isLoad:{type:Boolean,default:function(){return!1}}},data:function(){return{disabled:!0}},methods:{clickListCardItem:function(t){this.$emit("clickListCardItem",t)},load:function(){this.$emit("bottomLoad"),this.disabled=!0}},watch:{listCardData:function(){!0===this.isLoad&&(0!==this.listCardData.length?this.disabled=!1:this.disabled=!0)}}},n=i,o=(s("5b37"),s("2877")),c=Object(o["a"])(n,a,r,!1,null,"556776df",null);e["a"]=c.exports},"9a78":function(t,e,s){"use strict";s("e1ff")},"9f98":function(t,e,s){},a16d:function(t,e,s){},a5bb:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Followeds"},[s("div",{staticClass:"title"},[t._v(t._s(t.userName+"的粉丝"))]),s("user-list-card",{attrs:{userList:t.userList,isLoad:t.isMore},on:{bottomLoad:t.bottomLoad}}),s("go-top",{attrs:{scrollObj:".Followeds"}})],1)},r=[],i=s("c7eb"),n=s("2909"),o=s("1da1"),c=s("3bc6"),u=s("7cff"),l={components:{UserListCard:c["a"],GoTop:u["a"]},name:"Followeds",data:function(){return{currentPage:1,userList:[],userName:"",isMore:!1}},methods:{getFolloweds:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var s,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request("/user/followeds",{uid:t.$route.params.uid,offset:30*(t.currentPage-1)});case 2:a=e.sent,t.isMore=a.data.more,(s=t.userList).push.apply(s,Object(n["a"])(a.data.followeds));case 5:case"end":return e.stop()}}),e)})))()},getUserInfo:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request("/user/detail?uid=".concat(t.$route.params.uid));case 2:s=e.sent,t.userName=s.data.profile.nickname;case 4:case"end":return e.stop()}}),e)})))()},bottomLoad:function(){this.currentPage+=1,this.getFolloweds()}},created:function(){this.getFolloweds(),this.getUserInfo()}},d=l,f=(s("331c"),s("2877")),m=Object(f["a"])(d,a,r,!1,null,"fb7eb0de",null);e["default"]=m.exports},a630:function(t,e,s){var a=s("23e7"),r=s("4df4"),i=s("1c7e"),n=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:n},{from:r})},b76f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Personal"},[t.userInfo.avatarUrl?s("div",{staticClass:"userInfo"},[s("div",{staticClass:"left"},[s("img",{staticClass:"avatar",attrs:{src:t.userInfo.avatarUrl+"?param=400y400",alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"rightTop"},[s("div",{staticClass:"username"},[s("div",[t._v(t._s(t.userInfo.nickname))]),t.isCurrentUser&&this.$store.state.isLogin?s("div",{staticClass:"logout",on:{click:t.logout}},[s("i",{staticClass:"iconfont icon-zhuxiao1"}),s("span",[t._v("退出登录")])]):t._e()]),s("div",{staticClass:"tags"},[s("div",{staticClass:"level"},[t._v(t._s("Lv"+t.userInfo.level))]),s("div",{staticClass:"gender"})])]),s("div",{staticClass:"rightBottom"},[s("div",{staticClass:"dataNums"},[s("div",{staticClass:"numItem"},[s("div",{staticClass:"numItemTop"},[t._v(t._s(t.userInfo.eventCount))]),s("div",{staticClass:"numItemBottom"},[t._v("动态")])]),s("div",{staticClass:"numItem",on:{click:function(e){return t.$router.push({name:"follows",params:{uid:t.$route.params.uid}})}}},[s("div",{staticClass:"numItemTop"},[t._v(t._s(t.userInfo.newFollows))]),s("div",{staticClass:"numItemBottom"},[t._v("关注")])]),s("div",{staticClass:"numItem",on:{click:function(e){return t.$router.push({name:"followeds",params:{uid:t.$route.params.uid}})}}},[s("div",{staticClass:"numItemTop"},[t._v(t._s(t.userInfo.followeds))]),s("div",{staticClass:"numItemBottom"},[t._v("粉丝")])])])]),s("div",{staticClass:"otherInfo"},[s("div",{staticClass:"otherInfoItem"},[s("div",{staticClass:"otherInfoKey"},[t._v("用户id：")]),s("div",{staticClass:"ptherInfoValue"},[t._v(t._s(t.userInfo.userId))])]),s("div",{staticClass:"otherInfoItem"},[s("div",{staticClass:"otherInfoKey"},[t._v("所在地区：")]),s("div",{staticClass:"ptherInfoValue"},[t._v(" "+t._s(t.userInfo.province+" "+t.userInfo.city)+" ")])]),s("div",{staticClass:"otherInfoItem"},[s("div",{staticClass:"otherInfoKey"},[t._v("个人介绍：")]),s("div",{staticClass:"ptherInfoValue"},[t._v(" "+t._s(""==t.userInfo.signature?"暂无介绍":t.userInfo.signature)+" ")])])])])]):t._e(),s("div",{staticClass:"musicList"},[0!=t.createdMusicList.length?s("div",{staticClass:"musicListTitle"},[t._v(" "+t._s(t.userInfo.nickname)+"创建的歌单("+t._s(t.createdMusicList.length)+") ")]):t._e(),s("list-card",{attrs:{listCardData:t.createdMusicList},on:{clickListCardItem:t.clickListCardItem}}),0!=t.collectedMusicList.length?s("div",{staticClass:"musicListTitle"},[t._v(" "+t._s(t.userInfo.nickname)+"收藏的歌单("+t._s(t.collectedMusicList.length)+") ")]):t._e(),s("list-card",{attrs:{listCardData:t.collectedMusicList},on:{clickListCardItem:t.clickListCardItem}})],1)])},r=[],i=s("c7eb"),n=s("1da1"),o=(s("c740"),s("b0c0"),s("fb6a"),s("9916")),c={components:{ListCard:o["a"]},name:"Personal",data:function(){return{userInfo:{},createdMusicList:[],collectedMusicList:[],isCurrentUser:!1}},methods:{clickListCardItem:function(t){this.$router.push({name:"musicListDetail",params:{id:t}})},getUserInfo:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request("/user/detail?uid=".concat(t.$route.params.uid));case 2:s=e.sent,s||t.$message.error("获取用户信息失败!"),s.data.profile.level=s.data.level,t.userInfo=s.data.profile;case 6:case"end":return e.stop()}}),e)})))()},getUserMusicList:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var s,a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Date.parse(new Date),e.next=3,t.$request("/user/playlist",{uid:t.$route.params.uid,timestamp:s});case 3:a=e.sent,a=a.data.playlist,r=a.findIndex((function(t){return!0===t.subscribed})),a[0].name="".concat(t.userInfo.nickname,"喜欢的音乐"),t.createdMusicList=a.slice(0,r),t.collectedMusicList=a.slice(r);case 9:case"end":return e.stop()}}),e)})))()},logout:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request("/logout");case 2:if(s=e.sent,200===s.data.code){e.next=6;break}return t.$message("退出登录失败, 请稍后重试!"),e.abrupt("return",!1);case 6:window.localStorage.removeItem("userId"),t.$store.commit("updataLoginState",!1),t.$message.success("退出成功!"),t.isCurrentUser=!1;case 10:case"end":return e.stop()}}),e)})))()}},watch:{"$store.state.isLogin":function(t){window.localStorage.getItem("userId")&&t&&(this.isCurrentUser=window.localStorage.getItem("userId")===this.$route.params.uid)}},created:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserInfo();case 2:t.getUserMusicList(),window.localStorage.getItem("userId")&&(t.isCurrentUser=window.localStorage.getItem("userId")===t.$route.params.uid);case 4:case"end":return e.stop()}}),e)})))()}},u=c,l=(s("7c93"),s("2877")),d=Object(l["a"])(u,a,r,!1,null,"76a72a0c",null);e["default"]=d.exports},b7b6:function(t,e,s){"use strict";s("d95b")},d95b:function(t,e,s){},e1ff:function(t,e,s){}}]);
//# sourceMappingURL=personal_follows_followeds.deb78fff.js.map