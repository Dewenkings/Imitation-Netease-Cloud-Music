{"version":3,"sources":["webpack:///./src/components/listCard/ListCard.vue?879f","webpack:///./src/views/discover/discoverChildren/Recommend.vue?527b","webpack:///./src/views/discover/discoverChildren/Recommend.vue?1b59","webpack:///src/views/discover/discoverChildren/Recommend.vue","webpack:///./src/views/discover/discoverChildren/Recommend.vue?ed1a","webpack:///./src/views/discover/discoverChildren/Recommend.vue","webpack:///./src/components/listCard/ListCard.vue?bb4e","webpack:///src/components/listCard/ListCard.vue","webpack:///./src/components/listCard/ListCard.vue?55db","webpack:///./src/components/listCard/ListCard.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_l","item","index","key","imageUrl","on","$event","TurnToPage","_m","musicList","clickToMusicListDetail","staticRenderFns","_v","components","ListCard","name","data","bannerData","songDetail","methods","getBannerData","type","res","getMusicList","limit","params","id","musicListId","created","component","directives","rawName","value","expression","ref","disabled","clickListCardItem","picUrl","coverImgUrl","_s","props","listCardData","default","isLoad","load","watch"],"mappings":"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","file":"js/chunk-a3d391ba.a0fc1c45.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCard.vue?vue&type=style&index=0&id=556776df&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=style&index=0&id=337dd502&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recommendContainer\"},[_c('div',{staticClass:\"recommend\"},[_c('div',{staticClass:\"carousel\"},[_c('el-carousel',{attrs:{\"interval\":4000,\"type\":\"card\",\"height\":\"180px\"}},_vm._l((_vm.bannerData),function(item,index){return _c('el-carousel-item',{key:index},[_c('img',{attrs:{\"src\":item.imageUrl,\"alt\":\"\"},on:{\"click\":function($event){return _vm.TurnToPage(item)}}})])}),1)],1),_c('div',{staticClass:\"recommendMusicList\"},[_vm._m(0),_c('list-card',{attrs:{\"listCardData\":_vm.musicList},on:{\"clickListCardItem\":_vm.clickToMusicListDetail}})],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',[_vm._v(\"推荐歌单\"),_c('i',{staticClass:\"iconfont icon-arrow-right-bold\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"recommendContainer\">\n    <!-- 轮播图 -->\n    <div class=\"recommend\">\n      <div class=\"carousel\">\n        <el-carousel :interval=\"4000\" type=\"card\" height=\"180px\">\n          <el-carousel-item v-for=\"(item, index ) in bannerData\" :key=\"index\">\n            <img :src=\"item.imageUrl\" @click=\"TurnToPage(item)\" alt=\"\">\n          </el-carousel-item>\n        </el-carousel>\n      </div>\n      <!-- 推荐歌单 -->\n      <div class=\"recommendMusicList\">\n        <h3>推荐歌单<i class=\"iconfont icon-arrow-right-bold\"></i></h3>\n        <list-card\n        :listCardData=\"musicList\"\n        @clickListCardItem=\"clickToMusicListDetail\"\n        ></list-card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ListCard from 'components/listCard/ListCard.vue'\nexport default {\n  components: { ListCard },\n  name: 'recommend',\n  data () {\n    return {\n      bannerData: '',\n      musicList: [],\n      songDetail: {}\n    }\n  },\n  methods: {\n    async getBannerData () {\n      const res = await this.$request('/banner', {\n        type: 0\n      })\n      console.log('banner:', res)\n      this.bannerData = res.data.banners\n    },\n    // 请求推荐歌单数据的前十个\n    getMusicList () {\n      this.$request('/personalized', { limit: 10 }).then((res) => {\n        console.log('personalized:', res)\n        this.musicList = res.data.result\n      })\n    },\n    // 获取歌单详情\n    // getMusicDetail (id) {\n    //   this.songDetail = this.$request('/playlist/detail', { id, timestamp: Date.parse(new Date()) }).then(\n    //     res => res.data\n    //   )\n    // },\n    // 点击轮播图跳转具体页面--- to do\n    TurnToPage (item) {\n      // 专辑\n      console.log('item--', item)\n      const type = item.targetType\n      const id = item.targetId\n      console.log('type', typeof id)\n      console.log(type, id)\n      if (type === 10) {\n        console.log('album')\n        this.$router.push({ name: 'album', params: { id: id } })\n      } else if (type === 1000) { // 歌单\n        console.log('musicList')\n        this.$router.push({ name: 'musicListDetail', params: { id: id } })\n      } else if (type === 100) {\n        console.log('singer') // 歌手\n        this.$router.push({ name: 'singerDetail', params: { id: id } })\n      } else if (type === 1) {\n        console.log('song') // 单曲\n        // ----------------------------\n        // // this.getMusicDetail(id)\n        // this.songDetail = this.$request('/playlist/detail', { id: item.targetId, timestamp: Date.parse(new Date()) }).then(\n        //   res => res.data\n        // )\n        // -------------------------\n        // console.log('item-edit', this.songDetail)\n        // 可以播放，当时存在底部播放按钮左侧没有变化\n        // this.$store.commit('updateMusicId', id.toString())\n        const musicList = this.$store.state.musicList\n        const currentIndex = this.$store.state.currentIndex\n        // 先判断该歌曲是否已经在歌单中存在，避免重复点击导致歌单出现相同歌曲\n        console.log(id.toString())\n        const isExist = musicList.find((item) => {\n          return item.id === id.toString()\n        })\n        console.log('isExist', isExist)\n        if (isExist) {\n        // 如果已经存在 则只提交歌曲id并return出去\n          this.$store.commit('updateMusicId', id.toString())\n          return false\n        }\n        this.$store.commit('changePlayState', false)\n        // 将请求到的歌曲详情插入到歌单对应位置并提交至vuex\n        musicList.splice(currentIndex + 1, 0, item)\n\n        this.$store.commit('updateMusicId', id)\n        this.$store.commit('updateMusicList', {\n          musicList,\n          musicListId: this.$store.state.musicListId\n        })\n      }\n    },\n    // 点击跳转歌单详情页面\n    clickToMusicListDetail (id) {\n      this.$router.push({\n        name: 'musicListDetail', params: { id }\n      })\n    }\n  },\n  async created () {\n    this.getBannerData()\n    this.getMusicList()\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .recommendContainer {\n    display: flex;\n    justify-content: center;\n  }\n  .recommend {\n    max-width: 1000px;\n  }\n  .carousel {\n    width: 100%;\n  }\n  .el-carousel {\n    margin: auto;\n    width: 800px;\n  }\n  .el-carousel__item {\n    border-radius: 10px;\n  }\n\n  .el-carousel__item img {\n    // width: 486px;\n    // height: 180px;\n    height: 100%;\n  }\n  .recommendMusicList {\n    color: #373737;\n    cursor: pointer;\n  }\n  .recommendMusicList h3 {\n    margin-left: 20px;\n  }\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recommend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Recommend.vue?vue&type=template&id=337dd502&scoped=true&\"\nimport script from \"./Recommend.vue?vue&type=script&lang=js&\"\nexport * from \"./Recommend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Recommend.vue?vue&type=style&index=0&id=337dd502&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"337dd502\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.load),expression:\"load\"}],ref:\"listCard\",staticClass:\"listCard\",attrs:{\"infinite-scroll-disabled\":_vm.disabled,\"infinite-scroll-distance\":300,\"infinite-scroll-immediate\":false}},_vm._l((_vm.listCardData),function(item,index){return _c('div',{key:index,staticClass:\"listCardItem\",on:{\"click\":function($event){return _vm.clickListCardItem(item.id)}}},[_c('div',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":(item.picUrl || item.coverImgUrl) + '?param=400y400',\"alt\":\"\"}})]),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.name))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"listCard\"\n    v-infinite-scroll=\"load\"\n    :infinite-scroll-disabled=\"disabled\"\n    :infinite-scroll-distance=\"300\"\n    :infinite-scroll-immediate=\"false\"\n    ref=\"listCard\"\n  >\n    <div\n      class=\"listCardItem\"\n      v-for=\"(item, index) in listCardData\"\n      :key=\"index\"\n      @click=\"clickListCardItem(item.id)\"\n    >\n      <div class=\"image\">\n        <img\n          :src=\"(item.picUrl || item.coverImgUrl) + '?param=400y400'\"\n          alt=\"\"\n        />\n      </div>\n      <div class=\"title\">{{ item.name }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ListCard',\n  props: {\n    listCardData: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    // 是否使用上拉触底事件\n    isLoad: {\n      type: Boolean,\n      default () {\n        return false\n      }\n    }\n  },\n  data () {\n    return {\n      // 无限滚动是否可用\n      disabled: true\n    }\n  },\n  methods: {\n    clickListCardItem (id) {\n      this.$emit('clickListCardItem', id)\n    },\n    // 上拉触底触发\n    load () {\n      //   console.log(\"滑动到底部\");\n      this.$emit('bottomLoad')\n      // 触发load后加载数据 期间不允许再次触发load事件\n      this.disabled = true\n    }\n  },\n  watch: {\n    //   数据更新后，可再次运行触发load事件\n    listCardData () {\n      if (this.isLoad === true) {\n        if (this.listCardData.length !== 0) {\n          this.disabled = false\n        } else {\n          this.disabled = true\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.listCard {\n  display: flex;\n  flex-wrap: wrap;\n  margin: 10px 0 0 20px;\n}\n\n.listCardItem {\n  width: 18.4%;\n  margin: 0 2% 20px 0;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.listCardItem:nth-child(5n) {\n  margin-right: 0;\n}\n\n.image {\n  width: 100%;\n  padding-bottom: 100%;\n  height: 0;\n  position: relative;\n}\n\n.image::after {\n  content: \"\";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: url(\"~assets/img/imgLoading.png\") no-repeat center;\n  background-size: contain;\n  border-radius: 10px;\n  z-index: -1;\n}\n\n.image img {\n  width: 100%;\n  border-radius: 10px;\n}\n\n.title {\n  margin-top: 8px;\n  padding: 0 2px;\n  font-size: 12px;\n  color: black;\n  line-height: 17px;\n  /* 两行溢出 */\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListCard.vue?vue&type=template&id=556776df&scoped=true&\"\nimport script from \"./ListCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ListCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListCard.vue?vue&type=style&index=0&id=556776df&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"556776df\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}